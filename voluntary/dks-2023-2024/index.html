<!DOCTYPE html>
<html lang="en-us">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <meta itemprop="name" content="aviac.dev" />
  <meta itemprop="description" content="" />

  <link rel="apple-touch-icon" sizes="180x180" href="https://aviac.dev/apple-touch-icon.png"/>
  <link rel="icon" type="image/png" sizes="32x32" href="https://aviac.dev/fist-32x32.png" />
  <link
    rel="shortcut icon"
    href="https://aviac.dev/fist.ico"
  />
  <link rel="stylesheet" href="https://aviac.dev/style.css"/>
  
  <title>DKS Gymnasium Dresden (2023&#x2F;2024) Updated: 23.10.</title>
  

  

  <body id="page">

	
<header id="site-header" class="animated slideInUp faster">
  <div class="hdr-wrapper section-inner">
    <div class="hdr-left">
      <div class="site-branding">
        <a href="https:&#x2F;&#x2F;aviac.dev">aviac.dev</a>
      </div>
      <nav class="site-nav hide-in-mobile">
            
        
        <a href="https://aviac.dev/voluntary">Voluntary Work</a>
        
        <a href="https://aviac.dev/dev-log">Dev Logs</a>
        
      </nav>
    </div>
    <div class="hdr-right hdr-icons">
      <span class="hdr-social hide-in-mobile">
        


<a href="https:&#x2F;&#x2F;codeberg.org&#x2F;Aviac" target="_blank" rel="noopener me"
   title="codeberg">
  
  <svg role="img" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Codeberg</title><path d="M11.955.49A12 12 0 0 0 0 12.49a12 12 0 0 0 1.832 6.373L11.838 5.928a.187.14 0 0 1 .324 0l10.006 12.935A12 12 0 0 0 24 12.49a12 12 0 0 0-12-12 12 12 0 0 0-.045 0zm.375 6.467l4.416 16.553a12 12 0 0 0 5.137-4.213z"/></svg>
  
</a>

<a href="mailto:aviac@mailbox.org" target="_blank" rel="noopener me"
   title="email">
  
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-envelope-fill" viewBox="0 0 16 16">
  <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.801V4.697l-5.803 3.546Z"/>
</svg>
  
</a>

<a href="@aviac:voidd.social" target="_blank" rel="noopener me"
   title="matrix">
  
<svg version="1.1" height="24" viewBox="0 0 75 32" xmlns="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<title>Matrix (protocol) logo</title>
 <g fill="currentColor">
  <path d="m0.936 0.732v30.52h2.194v0.732h-3.035v-31.98h3.034v0.732zm8.45 9.675v1.544h0.044a4.461 4.461 0 0 1 1.487-1.368c0.58-0.323 1.245-0.485 1.993-0.485 0.72 0 1.377 0.14 1.972 0.42 0.595 0.279 1.047 0.771 1.355 1.477 0.338-0.5 0.796-0.941 1.377-1.323 0.58-0.383 1.266-0.574 2.06-0.574 0.602 0 1.16 0.074 1.674 0.22 0.514 0.148 0.954 0.383 1.322 0.707 0.366 0.323 0.653 0.746 0.859 1.268 0.205 0.522 0.308 1.15 0.308 1.887v7.633h-3.127v-6.464c0-0.383-0.015-0.743-0.044-1.082a2.305 2.305 0 0 0-0.242-0.882 1.473 1.473 0 0 0-0.584-0.596c-0.257-0.146-0.606-0.22-1.047-0.22-0.44 0-0.796 0.085-1.068 0.253-0.272 0.17-0.485 0.39-0.639 0.662a2.654 2.654 0 0 0-0.308 0.927 7.074 7.074 0 0 0-0.078 1.048v6.354h-3.128v-6.398c0-0.338-7e-3 -0.673-0.021-1.004a2.825 2.825 0 0 0-0.188-0.916 1.411 1.411 0 0 0-0.55-0.673c-0.258-0.168-0.636-0.253-1.135-0.253a2.33 2.33 0 0 0-0.584 0.1 1.94 1.94 0 0 0-0.705 0.374c-0.228 0.184-0.422 0.449-0.584 0.794-0.161 0.346-0.242 0.798-0.242 1.357v6.619h-3.129v-11.41zm16.46 1.677a3.751 3.751 0 0 1 1.233-1.17 5.37 5.37 0 0 1 1.685-0.629 9.579 9.579 0 0 1 1.884-0.187c0.573 0 1.153 0.04 1.74 0.121 0.588 0.081 1.124 0.24 1.609 0.475 0.484 0.235 0.88 0.562 1.19 0.981 0.308 0.42 0.462 0.975 0.462 1.666v5.934c0 0.516 0.03 1.008 0.088 1.478 0.058 0.471 0.161 0.824 0.308 1.06h-3.171a4.435 4.435 0 0 1-0.22-1.104c-0.5 0.515-1.087 0.876-1.762 1.081a7.084 7.084 0 0 1-2.071 0.31c-0.544 0-1.05-0.067-1.52-0.2a3.472 3.472 0 0 1-1.234-0.617 2.87 2.87 0 0 1-0.826-1.059c-0.199-0.426-0.298-0.934-0.298-1.522 0-0.647 0.114-1.18 0.342-1.6 0.227-0.419 0.52-0.753 0.881-1.004 0.36-0.25 0.771-0.437 1.234-0.562 0.462-0.125 0.929-0.224 1.399-0.298 0.47-0.073 0.932-0.132 1.387-0.176 0.456-0.044 0.86-0.11 1.212-0.199 0.353-0.088 0.631-0.217 0.837-0.386s0.301-0.415 0.287-0.74c0-0.337-0.055-0.606-0.166-0.804a1.217 1.217 0 0 0-0.44-0.464 1.737 1.737 0 0 0-0.639-0.22 5.292 5.292 0 0 0-0.782-0.055c-0.617 0-1.101 0.132-1.454 0.397-0.352 0.264-0.558 0.706-0.617 1.323h-3.128c0.044-0.735 0.227-1.345 0.55-1.83zm6.179 4.423a5.095 5.095 0 0 1-0.639 0.165 9.68 9.68 0 0 1-0.716 0.11c-0.25 0.03-0.5 0.067-0.749 0.11a5.616 5.616 0 0 0-0.694 0.177 2.057 2.057 0 0 0-0.594 0.298c-0.17 0.125-0.305 0.284-0.408 0.474-0.103 0.192-0.154 0.434-0.154 0.728 0 0.28 0.051 0.515 0.154 0.706 0.103 0.192 0.242 0.342 0.419 0.453 0.176 0.11 0.381 0.187 0.617 0.231 0.234 0.044 0.477 0.066 0.726 0.066 0.617 0 1.094-0.102 1.432-0.309 0.338-0.205 0.587-0.452 0.75-0.739 0.16-0.286 0.26-0.576 0.297-0.87 0.036-0.295 0.055-0.53 0.055-0.707v-1.17a1.4 1.4 0 0 1-0.496 0.277zm11.86-6.1v2.096h-2.291v5.647c0 0.53 0.088 0.883 0.264 1.059 0.176 0.177 0.529 0.265 1.057 0.265 0.177 0 0.345-7e-3 0.507-0.022 0.161-0.015 0.316-0.037 0.463-0.066v2.426a7.49 7.49 0 0 1-0.882 0.089 21.67 21.67 0 0 1-0.947 0.022c-0.484 0-0.944-0.034-1.377-0.1a3.233 3.233 0 0 1-1.145-0.386 2.04 2.04 0 0 1-0.782-0.816c-0.191-0.353-0.287-0.816-0.287-1.39v-6.728h-1.894v-2.096h1.894v-3.42h3.129v3.42h2.29zm4.471 0v2.118h0.044a3.907 3.907 0 0 1 1.454-1.754 4.213 4.213 0 0 1 1.036-0.497 3.734 3.734 0 0 1 1.145-0.176c0.206 0 0.433 0.037 0.683 0.11v2.912a5.862 5.862 0 0 0-0.528-0.077 5.566 5.566 0 0 0-0.595-0.033c-0.573 0-1.058 0.096-1.454 0.287a2.52 2.52 0 0 0-0.958 0.783 3.143 3.143 0 0 0-0.518 1.158 6.32 6.32 0 0 0-0.154 1.434v5.14h-3.128v-11.4zm5.684-1.765v-2.582h3.128v2.582h-3.127zm3.128 1.765v11.4h-3.127v-11.4h3.128zm1.63 0h3.569l2.005 2.978 1.982-2.978h3.459l-3.745 5.339 4.208 6.067h-3.57l-2.378-3.596-2.38 3.596h-3.502l4.097-6.001zm15.3 20.84v-30.52h-2.194v-0.732h3.035v31.98h-3.035v-0.732z"/>
 </g>
</svg>
  
</a>



      </span>
      <button id="menu-btn" class="hdr-btn" title="Menu">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="feather feather-menu"
        >
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
    </div>
  </div>
</header>
<div id="mobile-menu" class="animated fast">
  <ul>
    
    <li><a href="https://aviac.dev/voluntary">Voluntary Work</a></li>
    
    <li><a href="https://aviac.dev/dev-log">Dev Logs</a></li>
    
  </ul>
</div>

	
	

		
<main class="site-main section-inner animated fadeIn faster">
  <article class="thin">
	<header class="post-header">
	  <div class="post-meta">
		
		<span>Oct 23, 2023</span>
		<small> - 
<span class="reading-time" title="Estimated read time">
  
  27 min read
  
</span>
</small>
		
            
            <button id="toc-btn" class="hdr-btn desktop-only-ib">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" 
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" 
                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" 
                    class="feather feather-list">
                    <line x1="8" y1="6" x2="21" y2="6"></line>
                    <line x1="8" y1="12" x2="21" y2="12"></line>
                    <line x1="8" y1="18" x2="21" y2="18"></line>
                    <line x1="3" y1="6" x2="3" y2="6"></line>
                    <line x1="3" y1="12" x2="3" y2="12"></line>
                    <line x1="3" y1="18" x2="3" y2="18"></line>
                </svg>
            </button>
		    
	  </div>
	</header>

	<div class="content">
        
	  <h1 id="1-basics">1. Basics</h1>
<h2 id="gta-programmieren">GTA Programmieren</h2>
<p>In diesem Jahr wollen wir noch einmal ordentlich und strukturiert das Framework <code>p5.js</code> kennenlernen und mithilfe davon das Programmieren allgemein erlernen. Danach sollte der Weg geebnet sein um weiter spezieller Seiten der Programmierung zu erlernen. Darunter zaehlen unter anderem aber nicht ausschliesslich:</p>
<ul>
<li>Web-Entwicklung</li>
<li>Spiele-Programmierung</li>
<li>IT-Security (&quot;Hacken&quot;)</li>
<li>Entwicklung von Apps/Programmen</li>
<li>Server-Entwicklung</li>
</ul>
<h2 id="das-framework-p5-js">Das Framework <code>p5.js</code></h2>
<p>Wir werden hauptsaechlich in JavaScript programmieren. Dies ist &quot;die Programmiersprache des Internets&quot;. Programme in JavaScript werden in Browsern ausgefuehrt. Zusaetzlich nutzen wir <code>p5.js</code>, ein JavaScript-Framework. Das bedeutet, dass wir zu den standardmaessig in JavaScript vorhandenen Grundbausteinen auch noch ein paar vorgefertigte Features erhalten, die uns das Leben einfacher machen werden.</p>
<h2 id="was-ist-programmieren">Was ist Programmieren?</h2>
<p>Sehr einfach formuliert ist Programmieren das aufschreiben von Befehlen, die der Computer dann fuer uns in einem unglaublich schnellen Tempo ausfuehrt, wenn wir das Programm auf ihm starten. Um genau diese einfachen Befehle soll es in diesem ersten Kapitel gehen.</p>
<h2 id="einfache-p5-js-befehle">Einfache <code>p5.js</code> Befehle</h2>
<p>Zunaechst oeffnen wir einmal den <code>p5.js</code>-Editor, der ueber diese URL hier im Browser zu finden ist:</p>
<p>https://editor.p5js.org/</p>
<p>Wir sehen, dass bereits ein Grundgeruest an code fuer uns existert.</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">createCanvas</span><span>(</span><span style="color:#d08770;">400</span><span>, </span><span style="color:#d08770;">400</span><span>);
</span><span>}
</span><span>
</span><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">draw</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">220</span><span>);
</span><span>}
</span></code></pre>
<p>Wenn wir das Programm ausfuehren, dann sehen wir folgendes Bild </p>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/001-basic.png" alt="Grauer Hintergrund beim Ausfuehren von p5js Standardprogramm" /></p>
<p>Fuer das erste Kapitel reicht es aus, den Code wiefolgt anzupassen</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">createCanvas</span><span>(</span><span style="color:#d08770;">400</span><span>, </span><span style="color:#d08770;">400</span><span>);
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">220</span><span>);
</span><span>}
</span></code></pre>
<p>Das Ergebnis beim Ausfuehren sollte das Gleiche sein. Nun zur Erklaerung. Wie bereits gesagt, fuehrt der Computer einfach nur die Befehle aus, die wir ihm aufschreiben. Im Fall unserers ersten Programms hier sind das die folgenden zwei Befehle:</p>
<ol>
<li><code>createCanvas(400, 400);</code> -&gt; dieser Befehl erstellt eine Art &quot;Leinwand&quot; auf die wir zeichnen koennen</li>
<li><code>background(220);</code> -&gt; dieser Befehl fuellt die Leinwand mit der grauen Farbe, die wir im Screenshot oben sehen koennen</li>
</ol>
<p>Auf die Zahlen werden wir spaeter naeher eingehen. Ausserdem besteht unser Programm noch aus einer anderen Komponente:</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#65737e;">// hier steht der Rest
</span><span>}
</span></code></pre>
<p>Das ist die sogenannte <code>setup</code> Funktion. Sie sagt dem Computer, dass er <strong>einmalig</strong> am Anfang des Programms alle Befehle ausfuehren soll, die zwischen den geschweiften Klammern (<code>{ ... }</code>) stehen. Damit haben wir eigentlich auch schon alles aus unserem ersten kleinen Programm erklaert.</p>
<blockquote>
<p>Nun moechte ich dir gerne ein paar neue Befehle zeigen und dich dazu einladen, damit herumzuexperimentieren. Bitte beachte, dass die neuen Befehle nach alle unter den <code>background(220);</code> Befehl gesetzt werden muessen und ansonsten nicht funktionieren werden!</p>
<ol>
<li>Hier ist die Liste der Befehle. Anstatt von &quot;ZAHL&quot; kannst du einfach wirklich eine Zahl (z.B. 100) einsetzen:</li>
</ol>
<ul>
<li><code>ellipse(Zahl, Zahl, Zahl);</code></li>
<li><code>rect(Zahl, Zahl, Zahl, Zahl);</code></li>
<li><code>fill(Zahl);</code></li>
<li><code>fill(Zahl, Zahl, Zahl);</code></li>
</ul>
<ol start="2">
<li>Welchen Nutzen haben die einzelnen Zahlen? Was bewirken sie?</li>
<li>Hast du auch schon einmal probiert die Zahlen im <code>createCanvas</code> und <code>background</code> Befehl zu aendern? Was passiert, wenn du es tust?</li>
</ol>
</blockquote>
<h2 id="die-p5-js-reference">Die <code>p5.js</code> Reference</h2>
<p>Es ist natuerlich etwas aufwendig jedes mal durch herumprobieren herauszufinden, welchen Nutzen die Zahlen der Befehle haben. Dafuer gibt es eine Art kleine Suchmaschine nur fuer die <code>p5.js</code> Befehle. Du kannst sie unter folgender URL finden:</p>
<p>https://p5js.org/reference/</p>
<p>Hier sind alle Befehle gelistet, die mit <code>p5.js</code> &quot;mitgeliefert&quot; werden. Dazu gibt es immer </p>
<ul>
<li>eine Beschreibung, was der Befehl macht</li>
<li>ein Beispiel</li>
<li>ganz unten die Erklaerung der Zahlen</li>
</ul>
<blockquote>
<p>Haben deine Vermutungen beim experimentieren von gerade eben gestimmt? Hier kannst du es ueberpruefen, indem du die Befehle suchst</p>
</blockquote>
<p>Du kannst auch sehen, dass einige der Befehle von oben (wie <code>fill</code>) unterschiedlich viele Zahlen nehmen koennen. Hier kannst du alle Moeglichkeiten herausfinden.</p>
<p>Unter der Ueberschrift <code>Shape -&gt; 2D Primitives</code> kannst du uebrigens noch weitere Befehle zum einfachen zeichnen finden.</p>
<blockquote>
<p>Probiere dich gerne noch weiter aus. Wie viele der existierenden Zeichenbefehle bekommst du zum Laufen? Was tun sie?</p>
</blockquote>
<h2 id="beispiel-programm-kapitel-1">Beispiel Programm Kapitel 1</h2>
<p>Da ich denke, dass es manchmal nuetzlich ist anhand von Beispielen zu lernen liefere ich jede Woche auch ein Beispiel mit. </p>
<h3 id="hier-ist-das-beispiel-dieser-woche">Hier ist das Beispiel dieser Woche</h3>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">createCanvas</span><span>(</span><span style="color:#d08770;">400</span><span>, </span><span style="color:#d08770;">400</span><span>);
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">220</span><span>);
</span><span>  
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">240</span><span>, </span><span style="color:#d08770;">40</span><span>, </span><span style="color:#d08770;">40</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">rect</span><span>(</span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">220</span><span>, </span><span style="color:#d08770;">60</span><span>, </span><span style="color:#d08770;">60</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">rect</span><span>(</span><span style="color:#d08770;">110</span><span>, </span><span style="color:#d08770;">110</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">200</span><span>, </span><span style="color:#d08770;">80</span><span>, </span><span style="color:#d08770;">80</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">rect</span><span>(</span><span style="color:#d08770;">120</span><span>, </span><span style="color:#d08770;">120</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">180</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">rect</span><span>(</span><span style="color:#d08770;">130</span><span>, </span><span style="color:#d08770;">130</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">160</span><span>, </span><span style="color:#d08770;">120</span><span>, </span><span style="color:#d08770;">120</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">rect</span><span>(</span><span style="color:#d08770;">140</span><span>, </span><span style="color:#d08770;">140</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">140</span><span>, </span><span style="color:#d08770;">140</span><span>, </span><span style="color:#d08770;">140</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">rect</span><span>(</span><span style="color:#d08770;">150</span><span>, </span><span style="color:#d08770;">150</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">120</span><span>, </span><span style="color:#d08770;">160</span><span>, </span><span style="color:#d08770;">160</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">rect</span><span>(</span><span style="color:#d08770;">160</span><span>, </span><span style="color:#d08770;">160</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">180</span><span>, </span><span style="color:#d08770;">180</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">rect</span><span>(</span><span style="color:#d08770;">170</span><span>, </span><span style="color:#d08770;">170</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">80</span><span>, </span><span style="color:#d08770;">200</span><span>, </span><span style="color:#d08770;">200</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">rect</span><span>(</span><span style="color:#d08770;">180</span><span>, </span><span style="color:#d08770;">180</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">60</span><span>, </span><span style="color:#d08770;">220</span><span>, </span><span style="color:#d08770;">220</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">rect</span><span>(</span><span style="color:#d08770;">190</span><span>, </span><span style="color:#d08770;">190</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">40</span><span>, </span><span style="color:#d08770;">240</span><span>, </span><span style="color:#d08770;">240</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">rect</span><span>(</span><span style="color:#d08770;">200</span><span>, </span><span style="color:#d08770;">200</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>)
</span><span>}
</span></code></pre>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/002-example1.png" alt="Overlapping rectangles which have colors ranging from red smoothly to a sky blue" /></p>
<h1 id="2-loops-und-neue-befehle">2. Loops und neue Befehle</h1>
<h2 id="hilfreiche-werte-width-height">Hilfreiche Werte (<code>width</code>, <code>height</code>)</h2>
<p>Zunaechst einmal werden wir ein paar weitere hilfreiche Werte kennenlernen. In unseren letzten Programmen war es teilweise schwierig die Formen perfekt auszurichten. Dafuer koennen wir die Werte <code>width</code> und <code>height</code> nutzen. Diese speichern:</p>
<ul>
<li>in <code>width</code> die Breite von der Leinwand, der erste Wert in den Klammern bei <code>createCanvas(200, 400)</code>, also hier hat <code>width</code> den Wert <code>200</code></li>
<li>in <code>height</code> die Hoehe von der Leinwand, der zweite Wert in den Klammern bei <code>createCanvas(200, 400)</code>, also hier hat <code>height</code> den Wert <code>400</code></li>
</ul>
<p>Wenn wir zum Beispiel einen Kreis in der Mitte der Leinwand malen wollen, koennen wir einfach den Punkt nehmen, der jeweils genau auf der Haelfte der Breite und der Hoehe liegt, also</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">createCanvas</span><span>(</span><span style="color:#d08770;">400</span><span>, </span><span style="color:#d08770;">400</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">200</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#bf616a;">width </span><span>/ </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#bf616a;">height </span><span>/ </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">100</span><span>)
</span><span>}
</span></code></pre>
<p>Auch wenn du die Werte im <code>createCanvas</code> Befehl aenderst, wird nun der Kreis immer perfekt in der Mitte platziert werden.</p>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/003-centered.png" alt="A white circle that is centered on a square canvas" /></p>
<h2 id="zufaellige-zahlenwerte-random">Zufaellige Zahlenwerte (<code>random</code>)</h2>
<p>Als naechstes lernen wir einen neuen Befehl kennen, mit dem wir viel Variation in unsere Programme bekommen koennen. Der Befehl heisst <code>random</code> und kann auf folgende Arten und Weisen verwendet werden: </p>
<ul>
<li><code>random()</code>, generiert eine zufaellige Zahl zwischen <code>0.0</code> und <code>1.0</code></li>
<li><code>random(min, max)</code>, hier muss man fuer <code>min</code> und <code>max</code> Zahlen einsetzen, dann generiert der Befehl eine zufaellige Zahl zwischen <code>min</code> und <code>max</code></li>
</ul>
<p>Das koennen wir nun zum Beispiel verwenden um einen Kreis an einer zufaelligen Position zu zeichnen: </p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">createCanvas</span><span>(</span><span style="color:#d08770;">400</span><span>, </span><span style="color:#d08770;">400</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">200</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">width</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">height</span><span>), </span><span style="color:#d08770;">100</span><span>)
</span><span>}
</span></code></pre>
<p>Der Mittelpunkt des Kreises hat einen x-Wert zwischen 0 und der maximalen Breite der Leinwand und einen y-Wert zwischen 0 und der maximalen Hoehe der Leinwand. Jedes Ausfuehren des Programms wird einen Kreis an einer neuen Position zeichnen. Ausserdem koennen wir auch die Farbe des Kreises zufaellig Waehlen, wenn wir noch den <code>fill</code> Befehl in Kombination mit <code>random</code> nutzen.</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">createCanvas</span><span>(</span><span style="color:#d08770;">400</span><span>, </span><span style="color:#d08770;">400</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">200</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>))
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">width</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">height</span><span>), </span><span style="color:#d08770;">100</span><span>)
</span><span>}
</span></code></pre>
<p>Nicht vergessen, die RGB Werte haben fuer jede Farbe (Rot, Gruen, Blau) einen Zahlenwert zwischen 0 und 255. Dementsprechend haben wir auch das <code>min</code> und das <code>max</code> von <code>random</code> gewaehlt.</p>
<h2 id="for-schleifen-for-loops">For-Schleifen (For Loops)</h2>
<p>Nun koennen wir schoene kuenstleriche Meisterwerke generieren, indem wir einfach ganz viele zufaellige Kreise mit zufaelligen Farben vom Computer auf die Leinwand zeichnen lassen:</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">createCanvas</span><span>(</span><span style="color:#d08770;">400</span><span>, </span><span style="color:#d08770;">400</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">200</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>))
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">width</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">height</span><span>), </span><span style="color:#d08770;">100</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>))
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">width</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">height</span><span>), </span><span style="color:#d08770;">100</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>))
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">width</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">height</span><span>), </span><span style="color:#d08770;">100</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>))
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">width</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">height</span><span>), </span><span style="color:#d08770;">100</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>))
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">width</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">height</span><span>), </span><span style="color:#d08770;">100</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>))
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">width</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">height</span><span>), </span><span style="color:#d08770;">100</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>))
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">width</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">height</span><span>), </span><span style="color:#d08770;">100</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>))
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">width</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">height</span><span>), </span><span style="color:#d08770;">100</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>))
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">width</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">height</span><span>), </span><span style="color:#d08770;">100</span><span>)
</span><span>
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>))
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">width</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">height</span><span>), </span><span style="color:#d08770;">100</span><span>)
</span><span>}
</span></code></pre>
<p>Wie man aber sehen kann ist es sehr muehselig so viel dafuer zu schreiben. Noch schlimmer ist, dass wenn wir jetzt die Groesse der Kreise auch noch zufaellig waehlen wollen, wir in jeder Zeile die <code>100</code> durch <code>random(0, 100)</code> (oder sowas in der Art) ersetzen muessen. Das kann ganz schoen nervig werden! Dafuer gibt es aber auch Hilfsmittel: Die sogenannten For-Schleifen. Lasst uns sie erst einmal ausprobieren, bevor wir uns im Detail anschauen, wie sie funktionieren:</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">createCanvas</span><span>(</span><span style="color:#d08770;">400</span><span>, </span><span style="color:#d08770;">400</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">200</span><span>)
</span><span>
</span><span>  </span><span style="color:#b48ead;">for </span><span>(</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">i </span><span>= </span><span style="color:#d08770;">0</span><span>; </span><span style="color:#bf616a;">i </span><span>&lt; </span><span style="color:#d08770;">10</span><span>; </span><span style="color:#bf616a;">i</span><span>=</span><span style="color:#bf616a;">i</span><span>+</span><span style="color:#d08770;">1</span><span>) {
</span><span>    </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>))
</span><span>    </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">width</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">height</span><span>), </span><span style="color:#d08770;">100</span><span>)
</span><span>  }
</span><span>}
</span></code></pre>
<p>Dieser Code macht das selbe wie der letzte Code und ist viel kuerzer durch die For-Schleifen. Wir koennen schon grob sehen, dass wir alles was zwischen den geschwungenen Klammern <code>{</code> und <code>}</code> schreiben 10 mal ausgefuehrt wird, da wir sowas wie <code>i &lt; 10</code> geschrieben haben. Aber wie funktioniert das jetzt eigentlich?</p>
<ul>
<li>Zunaechst beginnt jede For-Schleife mit dem Wort <code>for</code> (wovon sie auch ihren Namen hat). Das ist hauptsaechlich dazu da, damit der Computer ab dieser Stelle weiss &quot;Aha, jetzt interpretiere ich erstmal alles was folgt als eine For-Schleife&quot;. Es signalisiert ihm also das jetzt etwas besonderes kommt.</li>
<li>Darauf folgen Runde Klammern, die immer wiefolgt aufgebaut sind: <code>( START_BEFEHL, CHECK_OB_ENDE_ERREICHT, SCHRITT_BEFEHL )</code>. Hier eine naehere Erklaerung der einzelnen Komponenten
<ul>
<li><code>START_BEFEHL</code> wird einmal am Anfang der For-Schleife ausgefuehrt, bevor die erste Runde der Schleife loslaeuft. In unserem Fall legen wir eine Variable an, die wir fuer das Zaehlen verwenden <code>let i = 0</code>. <code>i</code> kann interpretiert werden als: &quot;Wir haben die Schleife schon i-Mal ausgefuehrt&quot;</li>
<li>mit <code>CHECK_OB_ENDE_ERREICHT</code> wird ueberprueft, ob wir die Schleife nocheinmal ausfuehren sollen oder ob wir fertig sind. In unserem Fall checken wir, ob unsere Variable einen gewuenschten Wert erreicht hat <code>i &lt; 10</code>. Man kann das lesen als: &quot;Solange i noch kleiner 10 ist, fuehre nochmal die Schleife aus&quot;. Wenn <code>i = 10</code> (oder <code>i &gt; 10</code>), dann bricht die Schleife in unserem Fall ab.</li>
<li><code>SCHRITT_BEFEHL</code> wird jedes Mal ausgefuehrt, wenn die Schleife einmal durchgelaufen ist. In unserem Fall zaehlen wir einfach die Variable um eins nach oben <code>i = i+1</code>. Das kann gelesen werden als: &quot;Nimm den alten Wert von i, addiere 1 und dann speichere es wieder in die Variable i ab&quot;</li>
</ul>
</li>
<li>Zuletzt kommen hinter den runden Klammern noch geschwungene Klammern und zwischen diesen geschwungenen Klammern kommen alle Befehle, die wir wiederholt ausfuehren wollen</li>
</ul>
<p>Lasst uns nocheinmal das Beispiel von oben Schritt fuer Schritt durchgehen:</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">for </span><span>(</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">i </span><span>= </span><span style="color:#d08770;">0</span><span>; </span><span style="color:#bf616a;">i </span><span>&lt; </span><span style="color:#d08770;">10</span><span>; </span><span style="color:#bf616a;">i</span><span>=</span><span style="color:#bf616a;">i</span><span>+</span><span style="color:#d08770;">1</span><span>) {
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>))
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">width</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">height</span><span>), </span><span style="color:#d08770;">100</span><span>)
</span><span>}
</span></code></pre>
<ol>
<li>Der Computer entdeckt die For-Schleife</li>
<li>Der <code>START_BEFEHL</code> wird ausgefuehrt (<code>let i = 0</code>)</li>
<li>Nun wird der <code>CHECK_OB_ENDE_ERREICHT</code> gemacht: <code>i &lt; 10</code> ? Wir setzen ein : <code>0 &lt; 10</code>. Das stimmt, also brechen wir noch nicht ab</li>
<li>Nun wird die Schleife das erste Mal ausgefuehrt also der erste bunte Kreis wird gemalt mit</li>
</ol>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>))
</span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">width</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#bf616a;">height</span><span>), </span><span style="color:#d08770;">100</span><span>)
</span></code></pre>
<ol start="5">
<li>Wenn die Befehle in der Schleife durchgelaufen sind, wird <code>SCHRITT_BEFEHL</code> ausgefuehrt: <code>i = i+1</code>, also eingesetzt steht da <code>i = 0 + 1</code> also ist nun <code>i = 1</code></li>
<li>Nun wird wieder der <code>CHECK_OB_ENDE_ERREICHT</code> gemacht: <code>i &lt; 10</code> ? Wir setzen ein : <code>1 &lt; 10</code>. Das stimmt, also brechen wir immer noch nicht ab</li>
<li>Nun wird die Schleife das erste Mal ausgefuehrt also der zweite bunte Kreis wird gemalt mit</li>
<li>Wenn die Befehle in der Schleife durchgelaufen sind, wird <code>SCHRITT_BEFEHL</code> wieder ausgefuehrt: <code>i = i+1</code>, also eingesetzt steht da <code>i = 1 + 1</code> also ist nun <code>i = 2</code>
...</li>
<li>Das wird immer weiter wiederholt bis irgendwann <code>i = 10</code> ist</li>
<li>Dann wird wieder der <code>CHECK_OB_ENDE_ERREICHT</code> gemacht: <code>i &lt; 10</code> ? Wir setzen ein : <code>10 &lt; 10</code>. Das stimmt nicht mehr, also brechen wir ab</li>
</ol>
<p>Man kann die Variable <code>i</code> uebrigens auch in der Schleife in die Befehle einbauen. Zum Beispiel in </p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">for </span><span>(</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">i </span><span>= </span><span style="color:#d08770;">0</span><span>; </span><span style="color:#bf616a;">i </span><span>&lt; </span><span style="color:#bf616a;">width</span><span>; </span><span style="color:#bf616a;">i </span><span>= </span><span style="color:#bf616a;">i </span><span>+ </span><span style="color:#d08770;">25</span><span>) {
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>));
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#bf616a;">i</span><span>, </span><span style="color:#bf616a;">height </span><span>/ </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#bf616a;">i </span><span>/ </span><span style="color:#d08770;">10</span><span>);
</span><span>}
</span></code></pre>
<p>Wird alle 25 Pixel zwischen 0 und <code>width</code> ein Kreis mit einem Mittelpunkt mit x-Wert i (0, 25, 50, 75, 100, ...), auf mittiger Hoehe und einem Radius von <code>i / 10</code> (0, 2.5, 5.0, 7.5, 10.0, ...) gezeichnet.</p>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/004-loops.png" alt="Circles with random colors in a line growing bigger from left to right" /></p>
<h2 id="die-draw-funktion-framerate-und-framecount">Die <code>draw</code> Funktion, <code>frameRate</code> und <code>frameCount</code></h2>
<p>Neben der <code>setup</code> Funktion, die wir bis hierher verwendet haben und die einmal am Anfang des Programs ausgefuehrt wird, existiert auch noch eine andere Funktion. Die <code>draw</code> Funktion sieht bis auf ihren Namen genauso aus wie die setup Funktion</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">draw</span><span>() {
</span><span>}
</span></code></pre>
<p>Der Unterschied zwischen den beiden Funktionen ist, dass die <code>draw</code> Funktion im Gegensatz zu <code>setup</code> wiederholt mit einer sogenannten &quot;frame rate&quot; ausgefuehrt wird. Die frame rate koennen wir in der <code>setup</code> Funktion mit <code>frameRate(ZAHL)</code> festlegen und sie gibt an, wie oft die <code>draw</code> Funktion jede Sekunde ausgefuehrt werden soll.</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">createCanvas</span><span>(</span><span style="color:#d08770;">400</span><span>, </span><span style="color:#d08770;">400</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">frameRate</span><span>(</span><span style="color:#d08770;">2</span><span>)
</span><span>}
</span><span>
</span><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">draw</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">200</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>), </span><span style="color:#8fa1b3;">random</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">255</span><span>));
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#bf616a;">width </span><span>/ </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#bf616a;">height </span><span>/ </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">100</span><span>);
</span><span>}
</span></code></pre>
<p>Dieses Programm, malt zwei mal in der Sekunde einen Kreis mit einer neuen Farbe mittig auf die Leinwand. Neben dem <code>frameRate</code> Befehl gibt es auch noch den <code>frameCount</code> Wert. Dieser gibt uns an, wie oft <code>draw</code> schon ausgefuehrt wurde und zaehlt jedes Mal um eins hoch, wenn die letzte Zeile in <code>draw</code> ausgefuehrt wurde.</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">createCanvas</span><span>(</span><span style="color:#d08770;">400</span><span>, </span><span style="color:#d08770;">400</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">frameRate</span><span>(</span><span style="color:#d08770;">30</span><span>)
</span><span>}
</span><span>
</span><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">draw</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">200</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#bf616a;">frameCount</span><span>, </span><span style="color:#bf616a;">height </span><span>/ </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">100</span><span>);
</span><span>}
</span></code></pre>
<p>In diesem Beispielprogramm hat der Kreis immer einen x-Wert vom aktuellen <code>frameCount</code> Wert. Dieser startet bei 0, also startet der Kreis am linken Rand. Da der <code>frameCount</code> langsam steigt, &quot;bewegt&quot; sich der Kreis langsam nach rechts.</p>
<!-- ## Noise

Bisher haben wir schon zufaellige Zahlen kennengelernt. Diese sind aber nicht wirklich hilfreich, wenn wir sie in der `draw` Funktion mit hoher `frameRate` verwenden wollen. Im folgenden Programm sehen wir zum Beispiel nur wildes rumgeflacker, da die Werte schon fast zu zufaellig gewaehlt werden

```js 
function setup() {
  createCanvas(400, 400)
  frameRate(30)
}

function draw() {
  background(200)
  circle(random(0, width), random(0, height), 100);
}
```

Wir malen 30 mal in der Sekunde irgendwo an einer zufaelligen Stelle einen Kreis. Um die Aenderungen ein bisschen sanfter zu gestalten, gibt es eine zweite Form von zufaelligen Zahlen. Diese koennen wir mit dem `noise(ZAHL)` Befehl erzeugen. Im Gegensatz zu `random` koennen wir bei `noise` keine Maximum und Minimum Werte angeben. Die Zahl, die `noise` erzeugt liegt immer zwischen 0.0 und 1.0. Da stellt sich dann trotzdem die Frage: Warum muessen wir dem Befehl eine Zahl als Eingabe uebergeben? Die Zahl wird genutzt, um die zufaellige Zahl zu erzeugen. 
-->
<h1 id="3-maus-variablen-und-listen">3. Maus, Variablen und Listen</h1>
<h2 id="maus-werte">Maus - Werte</h2>
<p>Zunaechst gibt es, wie schon in all unseren anderen Wochen, ein paar neue nuetzliche Werte, die uns helfen ganz einfach coole Programme zu schreiben. Dieses mal schauen wir uns <code>mouseX</code> und <code>mouseY</code> an. Wie die Namen schon halb verraten, sind das die X-und-Y-Werte der Maus. Diese werden dauernd geupdated sodass der Wert immer die wirkliche aktuelle Position des Mauszeigers darstellt. Man kann die Werte ganz einfach nutzen:</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">createCanvas</span><span>(</span><span style="color:#d08770;">400</span><span>, </span><span style="color:#d08770;">400</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">200</span><span>)
</span><span>}
</span><span>
</span><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">draw</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">200</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#bf616a;">mouseX</span><span>, </span><span style="color:#bf616a;">mouseY</span><span>, </span><span style="color:#d08770;">100</span><span>);
</span><span>}
</span></code></pre>
<p>In diesem Program wird jede Sekunde der Bildschirm mit der Hintergrundfarbe uebermalt und dann ein Kreis an der aktuellen Position des Mauszeigers gemalt.</p>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/005-mousexy.gif" alt="A white circle is painted and follows the cursor" /> </p>
<p>Man kann die Werte auch fuer andere Sachen als nur die Position benutzen. Versuche einmal selbst folgendes:</p>
<ol>
<li>Verwende den Wert <code>mouseX</code> um die Groesse eines Kreises zu steuern, der in der Mitte von der Leinwand ist </li>
<li>Verwende beide Werte <code>mouseX</code> und <code>mouseY</code> um die Farbe eines Kreises zu steuern. Was passiert, wenn du die Werte unterschiedlich kombinierst?</li>
</ol>
<ul>
<li><code>mouseX + mouseY</code></li>
<li><code>mouseX - mouseY</code></li>
<li><code>mouseX * mouseY</code></li>
</ul>
<h2 id="listen-und-variablen">Listen und Variablen</h2>
<p>Da heute die Idee aufkam etwas zu machen, was in Richtung eines &quot;SNAKE&quot; Spiels geht, haben wir uns ein dafuer wichtiges Konzept angeschaut. Das ist das Konzept der Listen.</p>
<p>Listen im Computer verhalten sich ganz aehlich wie Listen in der richtigen Welt: Wir nutzen sie um eine Ansammlung von Dingen zu speichern. In JavaScript koennen wir eine Liste wiefolgt erstellen:</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">liste </span><span>= [</span><span style="color:#d08770;">50</span><span>, </span><span style="color:#d08770;">40</span><span>, </span><span style="color:#d08770;">30</span><span>, </span><span style="color:#d08770;">20</span><span>, </span><span style="color:#d08770;">10</span><span>]
</span></code></pre>
<p>Das <code>let</code> Wort kennen wir schon aus den For-Schleifen. Es sagt dem Computer einfach, dass das was folgt eine Variable ist. Mithilfe von Variablen koennen wir Dinge abspeichern waehrend unser Programm laeuft. In diesem Fall speichern wir etwas unter dem Variablen-Namen <code>liste</code>. Du kannst dir hier aber auch jeden beliebigen Namen waehlen (<code>listeABC</code>, <code>merkzettel</code>, <code>quark</code>, ...) solange der Name nur Buchstaben enthaelt. Der Wert der Variable steht dann auf der anderen Seite von dem <code>=</code>. Die eckigen Klammern <code>[</code> und <code>]</code> deuten dem Computer an, dass wir eine Liste speichern. In der Liste koennen wir dann Zahlenwerte mit Komma getrennt speichern. Oh man ... das war jetzt viel Text 🥱</p>
<p>Lasst uns also mal schauen wie wir die Liste nun verwenden koennen. Mein Programm sieht jetzt so aus</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">liste </span><span>= [</span><span style="color:#d08770;">50</span><span>, </span><span style="color:#d08770;">40</span><span>, </span><span style="color:#d08770;">30</span><span>, </span><span style="color:#d08770;">20</span><span>, </span><span style="color:#d08770;">10</span><span>]
</span><span>
</span><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">createCanvas</span><span>(</span><span style="color:#d08770;">400</span><span>, </span><span style="color:#d08770;">400</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">200</span><span>)
</span><span>}
</span></code></pre>
<p>Wenn wir das ausfuehren passiert erstmal nix. Die Werte werden ja noch nicht verwendet. Um auf einen Wert in der Liste zuzugreifen, koennen wir folgendes schreiben:</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">liste </span><span>= [</span><span style="color:#d08770;">50</span><span>, </span><span style="color:#d08770;">40</span><span>, </span><span style="color:#d08770;">30</span><span>, </span><span style="color:#d08770;">20</span><span>, </span><span style="color:#d08770;">10</span><span>]
</span><span>
</span><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">createCanvas</span><span>(</span><span style="color:#d08770;">400</span><span>, </span><span style="color:#d08770;">400</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">200</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#bf616a;">liste</span><span>[</span><span style="color:#d08770;">0</span><span>])
</span><span>}
</span></code></pre>
<p>Hier nutzen wir also <code>liste[0]</code>. Das heisst soviel wie: Nutze den 0-ten Wert in der Liste. Der Computer schaut dann fuer uns diesen Wert nach und setzt ihn dort ein. Der Code oben ist also der gleiche wie</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">liste </span><span>= [</span><span style="color:#d08770;">50</span><span>, </span><span style="color:#d08770;">40</span><span>, </span><span style="color:#d08770;">30</span><span>, </span><span style="color:#d08770;">20</span><span>, </span><span style="color:#d08770;">10</span><span>]
</span><span>
</span><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">createCanvas</span><span>(</span><span style="color:#d08770;">400</span><span>, </span><span style="color:#d08770;">400</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">200</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">50</span><span>)
</span><span>}
</span></code></pre>
<p>da <code>50</code> das 0-te Element in der Liste ist. In der Informatik faengt man uebrigens bei 0 an zu zaehlen, was ziemlich verwirrend sein kann. Fragt mich lieber nicht wieso 🫣 Achtung: Das erste Element ist immer an Stelle 0, das zweite Element ist immer an Stelle 1 und so weiter 😵‍💫. Wenn wir nun die ganze Liste (also alle Werte in der Liste) verwenden wollen koennen wir also schreiben</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">liste </span><span>= [</span><span style="color:#d08770;">50</span><span>, </span><span style="color:#d08770;">40</span><span>, </span><span style="color:#d08770;">30</span><span>, </span><span style="color:#d08770;">20</span><span>, </span><span style="color:#d08770;">10</span><span>]
</span><span>
</span><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">createCanvas</span><span>(</span><span style="color:#d08770;">400</span><span>, </span><span style="color:#d08770;">400</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">200</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#bf616a;">liste</span><span>[</span><span style="color:#d08770;">0</span><span>])
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#bf616a;">liste</span><span>[</span><span style="color:#d08770;">1</span><span>])
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#bf616a;">liste</span><span>[</span><span style="color:#d08770;">2</span><span>])
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#bf616a;">liste</span><span>[</span><span style="color:#d08770;">3</span><span>])
</span><span>  </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#bf616a;">liste</span><span>[</span><span style="color:#d08770;">4</span><span>])
</span><span>}
</span></code></pre>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/006-list.png" alt="Multiple overlapping circles with radii from a list" /> </p>
<p>Wie zu sehen ist, muessen wir uns ziemlich oft wiederholen, um alle Werte aus der Liste zu nutzen. Was koennte uns mit Wiederholungen helfen? Richtig: For-Schleifen. Es gibt eine Standard-Loesung um etwas mit allen Werten in einer Liste zu machen, die wiefolgt aussieht:</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">liste </span><span>= [</span><span style="color:#d08770;">50</span><span>, </span><span style="color:#d08770;">40</span><span>, </span><span style="color:#d08770;">30</span><span>, </span><span style="color:#d08770;">20</span><span>, </span><span style="color:#d08770;">10</span><span>]
</span><span>
</span><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">createCanvas</span><span>(</span><span style="color:#d08770;">400</span><span>, </span><span style="color:#d08770;">400</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">200</span><span>)
</span><span>  </span><span style="color:#b48ead;">for </span><span>(</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">i </span><span>= </span><span style="color:#d08770;">0</span><span>; </span><span style="color:#bf616a;">i </span><span>&lt; </span><span style="color:#bf616a;">liste</span><span>.length; </span><span style="color:#bf616a;">i</span><span>++) {
</span><span>    </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#bf616a;">liste</span><span>[</span><span style="color:#bf616a;">i</span><span>])
</span><span>  }
</span><span>}
</span></code></pre>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/006-list.png" alt="Multiple overlapping circles with radii from a list" /> </p>
<p>Das macht genau dasselbe wie das letzte Programm. <code>liste.length</code> ist wie der Name schon sagt die Laenge der Liste, also in unserem Fall hier 5. Im ersten Durchlauf der Schleife fuehren wir den Befehl mit dem ersten Element (Achtung Element an Stelle 0!) aus. In der zweiten Wiederholung der Schleife ist das zweite Element dran und so weiter. Das coole nun ist: Wenn wir neue Elemente in die Liste schreiben, brauchen wir nun nicht mehr eine neue Zeile wie </p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span>    </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#bf616a;">liste</span><span>[</span><span style="color:#d08770;">5</span><span>])
</span></code></pre>
<p>schreiben, sondern die For-Schleife &quot;merkt&quot; automatisch, dass das neue Element da ist und malt es auch.</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">liste </span><span>= [</span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">90</span><span>, </span><span style="color:#d08770;">80</span><span>, </span><span style="color:#d08770;">70</span><span>, </span><span style="color:#d08770;">60</span><span>, </span><span style="color:#d08770;">50</span><span>, </span><span style="color:#d08770;">40</span><span>, </span><span style="color:#d08770;">30</span><span>, </span><span style="color:#d08770;">20</span><span>, </span><span style="color:#d08770;">10</span><span>]
</span><span>
</span><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">createCanvas</span><span>(</span><span style="color:#d08770;">400</span><span>, </span><span style="color:#d08770;">400</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">200</span><span>)
</span><span>  </span><span style="color:#b48ead;">for </span><span>(</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">i </span><span>= </span><span style="color:#d08770;">0</span><span>; </span><span style="color:#bf616a;">i </span><span>&lt; </span><span style="color:#bf616a;">liste</span><span>.length; </span><span style="color:#bf616a;">i</span><span>++) {
</span><span>    </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#d08770;">100</span><span>, </span><span style="color:#d08770;">100</span><span>, </span><span style="color:#bf616a;">liste</span><span>[</span><span style="color:#bf616a;">i</span><span>])
</span><span>  }
</span><span>}
</span></code></pre>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/007-listbig.png" alt="Even more overlapping circles with radii from a list" /> </p>
<p>Zum Schluss koennen wir noch einen ersten Prototypen von unserem &quot;SNAKE&quot; Spiel bauen. Dazu nutzen wir auch eine Liste und speichern darin die x-Werte der einzelnen SNAKE-Kreise.</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">snake_liste </span><span>= [</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>]
</span><span>
</span><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">createCanvas</span><span>(</span><span style="color:#d08770;">400</span><span>, </span><span style="color:#d08770;">400</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">frameRate</span><span>(</span><span style="color:#d08770;">3</span><span>)
</span><span>}
</span><span>
</span><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">draw</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">200</span><span>)
</span><span>  </span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#d08770;">4</span><span>] = </span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#d08770;">3</span><span>]
</span><span>  </span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#d08770;">3</span><span>] = </span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#d08770;">2</span><span>]
</span><span>  </span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#d08770;">2</span><span>] = </span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#d08770;">1</span><span>]
</span><span>  </span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#d08770;">1</span><span>] = </span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#d08770;">0</span><span>]
</span><span>  </span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#d08770;">0</span><span>] = </span><span style="color:#bf616a;">frameCount </span><span>* </span><span style="color:#d08770;">10
</span><span>
</span><span>  </span><span style="color:#b48ead;">for </span><span>(</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">i </span><span>= </span><span style="color:#d08770;">0</span><span>; </span><span style="color:#bf616a;">i </span><span>&lt; </span><span style="color:#bf616a;">snake_liste</span><span>.length; </span><span style="color:#bf616a;">i</span><span>++) {
</span><span>    </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#bf616a;">i</span><span>], </span><span style="color:#d08770;">200</span><span>, </span><span style="color:#d08770;">10</span><span>)
</span><span>  }
</span><span>}
</span></code></pre>
<p>🐍🎉</p>
<p>Der einzig richtig neue Code hier ist </p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span>  </span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#d08770;">4</span><span>] = </span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#d08770;">3</span><span>]
</span><span>  </span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#d08770;">3</span><span>] = </span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#d08770;">2</span><span>]
</span><span>  </span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#d08770;">2</span><span>] = </span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#d08770;">1</span><span>]
</span><span>  </span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#d08770;">1</span><span>] = </span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#d08770;">0</span><span>]
</span><span>  </span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#d08770;">0</span><span>] = </span><span style="color:#bf616a;">frameCount </span><span>* </span><span style="color:#d08770;">10
</span></code></pre>
<p>Das bedeutet so viel wie: </p>
<ul>
<li>nimm den Wert an Stelle 3 und schieb ihn an Stelle 4</li>
<li>nimm den Wert an Stelle 2 und schieb ihn an Stelle 3</li>
<li>nimm den Wert an Stelle 1 und schieb ihn an Stelle 2</li>
<li>nimm den Wert an Stelle 0 und schieb ihn an Stelle 1</li>
<li>Speichere den neuen Wert <code>frameCount * 10</code> an Stelle 0</li>
</ul>
<p>Damit ruecken die Kreise Stueck fuer Stueck nach. An Stelle 0 kommen immer neue Werte in die Liste (das ist also der Kopf) und den alten Wert von Stelle 4 ueberschreiben wir komplett (wir werfen ihn quasi weg, das ist das andere Ende der Schlange)</p>
<p>Expertenaufgabe: Vielleicht ist es der ein oder anderen Person schon aufgefallen. Beim &quot;Nachruecken&quot; wiederholt sich wieder viel Code. Was kann man also anwenden? Unsere gute Freunding die For-Schleifen! Du kannst ja mal versuchen das umzusetzen, wenn du magst. Ich gebe das grobe Geruest vor:</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">snake_liste </span><span>= [</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>]
</span><span>
</span><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">setup</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">createCanvas</span><span>(</span><span style="color:#d08770;">400</span><span>, </span><span style="color:#d08770;">400</span><span>)
</span><span>  </span><span style="color:#8fa1b3;">frameRate</span><span>(</span><span style="color:#d08770;">3</span><span>)
</span><span>}
</span><span>
</span><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">draw</span><span>() {
</span><span>  </span><span style="color:#8fa1b3;">background</span><span>(</span><span style="color:#d08770;">200</span><span>)
</span><span>
</span><span>  </span><span style="color:#b48ead;">for </span><span>(</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">i </span><span>= </span><span style="color:#bf616a;">snake_liste</span><span>.length; </span><span style="color:#bf616a;">i </span><span>&gt; </span><span style="color:#d08770;">0</span><span>; </span><span style="color:#bf616a;">i</span><span>--) {
</span><span>    </span><span style="color:#65737e;">// ???
</span><span>  }
</span><span>
</span><span>  </span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#d08770;">0</span><span>] = </span><span style="color:#bf616a;">frameCount </span><span>* </span><span style="color:#d08770;">10
</span><span>
</span><span>  </span><span style="color:#b48ead;">for </span><span>(</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">i </span><span>= </span><span style="color:#d08770;">0</span><span>; </span><span style="color:#bf616a;">i </span><span>&lt; </span><span style="color:#bf616a;">snake_liste</span><span>.length; </span><span style="color:#bf616a;">i</span><span>++) {
</span><span>    </span><span style="color:#8fa1b3;">circle</span><span>(</span><span style="color:#bf616a;">snake_liste</span><span>[</span><span style="color:#bf616a;">i</span><span>], </span><span style="color:#d08770;">200</span><span>, </span><span style="color:#d08770;">10</span><span>)
</span><span>  }
</span><span>}
</span></code></pre>
<p>Wie du sehen kannst, koennen wir auch von der anderen Seite Schleifen verwenden: Wir fangen beim oberen Grenzwert an und Zaehlen runter bis zur 0 (mit <code>i--</code>, das heisst &quot;zieh eins ab&quot;).</p>
<h1 id="4-zurueck-zum-anfang-mit-rust">4. Zurueck zum Anfang mit Rust</h1>
<p>Aufgrund von neuen technischen Begebenheiten (Laptops) haben wir nun mehr Freiheiten und sind nicht mehr auf p5.js zum Programmieren angewiesen. Die neue Idee ist deshalb nun nocheinmal von ganz vorn und in der Programmiersprache Rust durchzustarten. Trotzdem werden sich die Dinge, die wir bis hierher gelernt haben als nuetzlich ueberweisen und uebertragen lassen.</p>
<h2 id="die-programmierumgebung">Die Programmierumgebung</h2>
<p>Ich habe soweit alles vorbereitet, sodass keine grossartigen setups noetig sind, um loszustarten. Auf den Laptops ist die Linuxvariante <a href="https://nixos.org/download.html">NixOS</a> bereits im Vorfeld von mir installiert worden. Das ermoeglicht es mir &quot;Bau-Anleitungen&quot; fuer die Programmierumgebungen zu schreiben, die dann mit nur einem Befehl automatisch alles einrichten.</p>
<p>Die Anleitung, die wir als erstes nutzen wird wiefolgt ausgefuehrt:</p>
<pre data-lang="nix" style="background-color:#2b303b;color:#c0c5ce;" class="language-nix "><code class="language-nix" data-lang="nix"><span style="color:#bf616a;">nix develop </span><span style="color:#a3be8c;">github:RobWalt/HEG-GTA</span><span style="color:#65737e;">#comfyNew
</span></code></pre>
<p>Wenn der Befehl durchgelaufen ist, sollte sich VSCode mit einem Beispiel-Platzhalter-Projekt oeffnen.</p>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/008-vscode.png" alt="VSCode is open after executing the nix command" /> </p>
<p>VSCode braucht ein bisschen Zeit, um die Dateien zu analysieren. Wenn das geschafft ist, dann kannst du das Beispiel Programm ausfuehren, indem du in der <code>main.rs</code> Datei auf <code>Run</code> klickst. </p>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/009-run.png" alt="Run button is highlighted" /> </p>
<p>Danach sollte folgendes zu sehen sein.</p>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/010-basicrust.png" alt="A bluish square on a black background" /> </p>
<h2 id="selbst-das-programm-anpassen-variablen-anlegen-in-rust">Selbst das Programm anpassen - Variablen anlegen in Rust</h2>
<p>Als erstes wollen wir etwas sehr einfaches machen, was wir schon in p5 kennengelernt haben: Eine Variable anlegen. Dazu oeffnen wir zunaechst die <code>lib.rs</code> Datei. Das ist die Datei in der wir hauptsaechlich arbeiten werden, wenn wir selbst programmieren. Sie sieht erstmal wiefolgt aus </p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">pub mod </span><span>boilerplate;
</span><span style="color:#b48ead;">pub use </span><span>boilerplate::*;
</span><span style="color:#b48ead;">use </span><span>comfy::*;
</span><span>
</span><span>#[</span><span style="color:#bf616a;">derive</span><span>(Default)]
</span><span style="color:#b48ead;">pub struct </span><span>GameState {}
</span><span>
</span><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">setup</span><span>(</span><span style="color:#bf616a;">_c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {}
</span><span>
</span><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">update</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> GameState {} = &amp;</span><span style="color:#b48ead;">mut</span><span> c.state;
</span><span>    </span><span style="color:#96b5b4;">draw_rect</span><span>(Vec2::</span><span style="color:#d08770;">ZERO</span><span>, Vec2::</span><span style="color:#d08770;">ONE</span><span>, Color::rgb(</span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">0.1</span><span>, </span><span style="color:#d08770;">0.2</span><span>), </span><span style="color:#d08770;">0</span><span>);
</span><span>}
</span></code></pre>
<p>Hier macht es zum Beispiel Sinn eine Variable mit dem Namen <code>center</code> fuer die Mitte des Rechtecks anzulegen und zu nutzen. Das koennte dann wiefolgt funktionieren. Wir passen dafuer die Funktion <code>update</code> an.</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">update</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> GameState {} = &amp;</span><span style="color:#b48ead;">mut</span><span> c.state;
</span><span>
</span><span>    </span><span style="color:#b48ead;">let</span><span> center = Vec2::new(</span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">0.0</span><span>); </span><span style="color:#65737e;">// neu
</span><span>
</span><span>    </span><span style="color:#96b5b4;">draw_rect</span><span>(center, Vec2::</span><span style="color:#d08770;">ONE</span><span>, Color::rgb(</span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">0.1</span><span>, </span><span style="color:#d08770;">0.2</span><span>), </span><span style="color:#d08770;">0</span><span>);
</span><span>    </span><span style="color:#65737e;">//        ^^^^^^ neu
</span><span>}
</span></code></pre>
<p>Im Gegensatz zu p5.js nutzen wir nicht zwei einzelne Zahlenwerte fuer <code>x</code> und <code>y</code>, sonder buendeln beide Werte in dem Positions-Typen <code>Vec2</code> zusammen. Nuetzlicherweise erwartet die <code>draw_rect</code> Funktion genau dieses Typen, um die Mitte des Rechtecks zu wissen. Wenn wir das Programm nun ausfuehren, werden wir sehen, dass sich nichts weiter geaendert hat. Die Variable dient momentan hauptsaechlich der besseren Lesbarkeit. Neben dieser Eigenschaft, bietet <code>Vec2</code> auch noch andere Vorteile, die wir im weiteren Verlauf kennenlernen werden.</p>
<p>Ganz allgemein, kann man sagen, dass das Anlegen von Variablen in Rust eigentlich mehr oder weniger genauso aussieht wie in JavaScript in p5. Es folgt dem Schema </p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">let </span><span style="color:#d08770;">NAME </span><span>= </span><span style="color:#d08770;">WERT</span><span>;
</span></code></pre>
<p>Das einzige, was zu beachten ist, ist dass das Semikolon am Ende der Variablen-Definition wichtig ist. Rust ist jedoch so nett und weisst uns recht genau darauf hin, falls wir es vergessen.</p>
<h2 id="nutzen-von-gamestate">Nutzen von <code>GameState</code></h2>
<p>Momentan definieren wir noch die Variable <code>center</code> in der <code>update</code> Funktion. Das bedeutet, dass wir den Wert von <code>center</code> jedes frame neu auf einen konstanten Wert setzen. Damit gibt es leider keine Moeglichkeit fuer uns das <code>center</code>, also die Position, des Rechtecks zu veraendern ... Doch wartet! Es gibt einen Ausweg: Hier ist der Grund weshalb wir diesen komischen Code rund um <code>GameState</code> bereits im Programm haben. In <code>GameState</code> kann man Daten von Variablen ueber mehrere Frames speichern. Und hier ist, wie das geht:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">pub mod </span><span>boilerplate;
</span><span style="color:#b48ead;">pub use </span><span>boilerplate::*;
</span><span style="color:#b48ead;">use </span><span>comfy::*;
</span><span>
</span><span>#[</span><span style="color:#bf616a;">derive</span><span>(Default)]
</span><span style="color:#b48ead;">pub struct </span><span>GameState {
</span><span>    </span><span style="color:#65737e;">// hier wird der Name und der Typ der Daten, die
</span><span>    </span><span style="color:#65737e;">// wir speichern wollen im Format &quot;Name: Typ&quot; angegeben
</span><span>    </span><span style="color:#bf616a;">center</span><span>: Vec2, 
</span><span>}
</span><span>
</span><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">setup</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#65737e;">//      ^^^ Unterstrich entfernt
</span><span>
</span><span>    </span><span style="color:#65737e;">// Hier wird nun in der setup Funktion einmalig am 
</span><span>    </span><span style="color:#65737e;">// Anfang vom Programm der Wert von center gesetzt
</span><span>    c.state.center = Vec2::new(</span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">0.0</span><span>); </span><span style="color:#65737e;">// new
</span><span>}
</span><span>
</span><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">update</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> GameState { center } = &amp;</span><span style="color:#b48ead;">mut</span><span> c.state;
</span><span>    </span><span style="color:#65737e;">//             ^^^^^^^^ new
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Die Variablen-Definition koennen wir hier jetzt wieder loeschen
</span><span>
</span><span>    </span><span style="color:#96b5b4;">draw_rect</span><span>(*center, Vec2::</span><span style="color:#d08770;">ONE</span><span>, Color::rgb(</span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">0.1</span><span>, </span><span style="color:#d08770;">0.2</span><span>), </span><span style="color:#d08770;">0</span><span>);
</span><span>    </span><span style="color:#65737e;">//       ^^^^^^^^^ new, bitte beachtet, dass man hier einen Stern davor machen muss!
</span><span>}
</span></code></pre>
<p>Damit haben wir nun <code>center</code> nicht mehr als Variable, sondern als &quot;Feld in unserem GameState struct&quot;. An und fuer sich, macht dieser Code jetzt immernoch das gleiche wie vorher. Nun koennen wir aber in <code>update</code> den Wert von <code>center</code> veraendern und damit das Rechteck bewegen.</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">update</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> GameState { center } = &amp;</span><span style="color:#b48ead;">mut</span><span> c.state;
</span><span>
</span><span>    </span><span style="color:#65737e;">// erhoehe den x Wert von center ein kleines bisschen, also 
</span><span>    </span><span style="color:#65737e;">// bewege das Rechteck nach rechts
</span><span>    center.x += </span><span style="color:#d08770;">0.05</span><span>;
</span><span>
</span><span>    </span><span style="color:#96b5b4;">draw_rect</span><span>(*center, Vec2::</span><span style="color:#d08770;">ONE</span><span>, Color::rgb(</span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">0.1</span><span>, </span><span style="color:#d08770;">0.2</span><span>), </span><span style="color:#d08770;">0</span><span>);
</span><span>}
</span></code></pre>
<p>Kleiner Check am Rande: Um zu ueberpruefen, dass ich hier keinen Mist erzaehle, empfehle ich mal nachzuschauen, was passiert wenn man den Wert von <code>center</code> genauso wie oben aendert, wenn <code>center</code> aber als Variable definiert ist. Also was passiert wirklich, wenn die <code>update</code> Funktion wiefolgt aussieht:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">update</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> GameState { } = &amp;</span><span style="color:#b48ead;">mut</span><span> c.state;
</span><span>
</span><span>    </span><span style="color:#b48ead;">let mut</span><span> center = Vec2::new(</span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">0.0</span><span>);
</span><span>    </span><span style="color:#65737e;">// ^^^^^ das muss man schreiben, damit man den Wert aendern darf
</span><span>    center.x += </span><span style="color:#d08770;">0.05</span><span>;
</span><span>
</span><span>    </span><span style="color:#96b5b4;">draw_rect</span><span>(center, Vec2::</span><span style="color:#d08770;">ONE</span><span>, Color::rgb(</span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">0.1</span><span>, </span><span style="color:#d08770;">0.2</span><span>), </span><span style="color:#d08770;">0</span><span>);
</span><span>    </span><span style="color:#65737e;">//        ^^^^^^ Wenn center eine Variable ist, brauchen wir hier nicht den Stern
</span><span>}
</span></code></pre>
<h2 id="keyboard-input">Keyboard input</h2>
<p>Nun wollen wir ein bisschen Interaktion in unser Programm bringen. Am besten waere, wenn wir bestimmte Dinge tun koennen, wenn wir bestimmte Tasten druecken. Dafuer gibt es sogenannte If-Bedingungen. Ich gebe mal ein zum Einstieg ein Beispiel:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">update</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> GameState { center } = &amp;</span><span style="color:#b48ead;">mut</span><span> c.state;
</span><span>
</span><span>    </span><span style="color:#b48ead;">if </span><span style="color:#96b5b4;">is_key_pressed</span><span>(KeyCode::Up) {
</span><span>        center.y += </span><span style="color:#d08770;">0.05</span><span>;
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#96b5b4;">draw_rect</span><span>(*center, Vec2::</span><span style="color:#d08770;">ONE</span><span>, Color::rgb(</span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">0.1</span><span>, </span><span style="color:#d08770;">0.2</span><span>), </span><span style="color:#d08770;">0</span><span>);
</span><span>}
</span></code></pre>
<p>Die If-Bedingungen beginnen immer mit dem Schluesselwort <code>if</code>. Darauf folgt etwas was entweder wahr oder falsch sein kann. In unserem Fall check wir, ob eine Taste gedrueckt ist oder nicht. Wenn die Bedingung dann wahr ist, wird der Code in den Klammern <code>{ ... }</code> ausgefuehrt. In unserem Fall heisst das: Das Rechteck bewegt sich nach oben, wenn wir die Pfeil-nach-oben-Taste gedrueckt halten.</p>
<h2 id="uebungen">Uebungen</h2>
<ol>
<li>Implementiere die komplette Steuerung des Rechtecks in alle Richtungen (also auch noch fuer <code>KeyCode::Down, KeyCode::Left, KeyCode::Right</code>)</li>
<li>Fuege zum <code>GameState</code> noch ein neues Feld <code>speed</code> vom Typ <code>f32</code> (das sind Kommazahlen) hinzu und tausche es ueberall fuer den festen Wert <code>0.05</code> aus. Also:<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span>    </span><span style="color:#b48ead;">if </span><span style="color:#96b5b4;">is_key_pressed</span><span>(KeyCode::Up) {
</span><span>        center.y += *speed;
</span><span>    }
</span></code></pre>
Beachte, dass du hierbei das Sternchen auch wieder verwenden musst.</li>
<li>Implementiere etwas, womit man bei Tastendruck den <code>speed</code> veraendern kann. Achtung! Auch hier musst du IMMER <code>*speed</code> schreiben. </li>
<li>Begrenze mit weiteren If-Bedingungen des <code>speed</code>, damit er nicht zu hoch wird. Also wenn <code>speed</code> groesser als eine obere Grenze oder kleiner als eine untere Grenze ist, dann setze den Wert nicht noch hoeher/tiefer, sondern setze ihn auf den Wert der Grenze.</li>
</ol>
<h1 id="5-hinterteil-der-schlange">5. Hinterteil der Schlange</h1>
<p>Nun haben wir bereits den Kopf der Schlange implementiert. Das naechste logische Element ist es, den Rest des Koerpers der Schlange zu implementieren. Dazu werden wir Listen (auch Vektoren genannt) von Positionswerten verwenden. Deshalb jetzt erstmal ganz allgemein eine kleine Einfuehrung zu was Vektoren ueberhaupt sind und was man alles mit ihnen machen kann.</p>
<h2 id="listen-vektoren">Listen (Vektoren)</h2>
<p>Zunaechst klaeren wir einmal ganz grundlegende Fragen </p>
<h3 id="wozu-sind-listen-nuetzlich">Wozu sind Listen nuetzlich?</h3>
<p>Listen werden eingesetzt, um effektiv mehrere Daten von der gleichen Form (Typ), die aber unterschiedliche Werte haben, zu speichern. Nehmen wir folgendes Beispiel: Wir wollen eine Sammlung an Namen speichern. Dazu koennten wir nun mit unserem bisherigen Wissen einfach Variablen verwenden: </p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">let</span><span> name1 = &quot;</span><span style="color:#a3be8c;">Hannelore</span><span>&quot;;
</span><span style="color:#b48ead;">let</span><span> name2 = &quot;</span><span style="color:#a3be8c;">Hans</span><span>&quot;;
</span><span style="color:#b48ead;">let</span><span> name3 = &quot;</span><span style="color:#a3be8c;">Marlene</span><span>&quot;;
</span><span style="color:#b48ead;">let</span><span> name4 = &quot;</span><span style="color:#a3be8c;">Dieter</span><span>&quot;;
</span><span style="color:#b48ead;">let</span><span> name5 = &quot;</span><span style="color:#a3be8c;">Berta</span><span>&quot;;
</span></code></pre>
<p>Das wird nur leider sehr muehselig, umso mehr Namen es werden. Ausserdem ist es auch genauso aufwendig diese dann zu nutzen. Wollen wir sie zum Beispiel in der Konsole ausgeben, koennten wir schreiben:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span>println!(&quot;</span><span style="color:#a3be8c;">Hallo, </span><span style="color:#d08770;">{name1}</span><span style="color:#a3be8c;">!</span><span>&quot;);
</span><span>println!(&quot;</span><span style="color:#a3be8c;">Hallo, </span><span style="color:#d08770;">{name2}</span><span style="color:#a3be8c;">!</span><span>&quot;);
</span><span>println!(&quot;</span><span style="color:#a3be8c;">Hallo, </span><span style="color:#d08770;">{name3}</span><span style="color:#a3be8c;">!</span><span>&quot;);
</span><span>println!(&quot;</span><span style="color:#a3be8c;">Hallo, </span><span style="color:#d08770;">{name4}</span><span style="color:#a3be8c;">!</span><span>&quot;);
</span><span>println!(&quot;</span><span style="color:#a3be8c;">Hallo, </span><span style="color:#d08770;">{name5}</span><span style="color:#a3be8c;">!</span><span>&quot;);
</span><span>...
</span></code></pre>
<p>Mit Listen ist das alles viel einfacher und wir ersparen uns die staendigen Wiederholungen:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">let</span><span> names = vec![&quot;</span><span style="color:#a3be8c;">Hannelore</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Hans</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Marlene</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Dieter</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Berta</span><span>&quot;];
</span><span>
</span><span style="color:#b48ead;">for</span><span> name in names {
</span><span>  println!(&quot;</span><span style="color:#a3be8c;">Hallo, </span><span style="color:#d08770;">{name}</span><span style="color:#a3be8c;">!</span><span>&quot;);
</span><span>}
</span></code></pre>
<p>Diese 5 Zeilen tun genau das, was die vorherigen 10 Zeilen machen. Wie zu sehen ist sparen wir uns also viel Code damit. Auch Aenderungen sind einfacher: Ein neuer Name bedeutet:</p>
<ul>
<li>ohne Listen: 2 neue Zeilen</li>
<li>mit Listen: 1 neuer Eintrag (der Name) in der Liste</li>
</ul>
<h3 id="wie-werden-listen-erstellt">Wie werden Listen erstellt?</h3>
<p>Wie schon in den bisherigen Codeschnippseln zu sehen war werden Listen mit <code>vec![...]</code> erstellt, wobei <code>...</code> eine Aufreihung von Werten in der Liste sind. Diese Werte muessen vom selben Typ sein. Das heisst es ist nicht erlaubt z.B. Text und Zahlen zu mischen.</p>
<ul>
<li>erlaubt: <code>vec![1,2,3,4,5]</code>, <code>vec![&quot;rot&quot;, &quot;gelb&quot;, &quot;blau&quot;]</code></li>
<li>nicht erlaubt: <code>vec![&quot;Sonne&quot;, 1.5, 0]</code></li>
</ul>
<h3 id="was-koennen-listen-noch">Was koennen Listen noch?</h3>
<p>Es folgt noch eine kurze Liste von nuetzlichen Funktionen von Listen: </p>
<ul>
<li><code>.len()</code> gibt die Anzahl der Elemente in der Liste zurueck: <code>vec![1,2,3].len() == 3</code></li>
<li><code>.get(index)</code> gibt das Element an der Stelle <code>index</code> nur mit Leserechten zurueck, sofern es existiert. Achtung! Wir beginnen bei 0 zu zaehlen: <code>vec![1,2,3].get(1) == 2</code></li>
<li><code>.get_mut(index)</code> gibt das Element an der Stelle <code>index</code> mit Schreibrechten zurueck, sofern es existiert: <pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">let mut</span><span> liste = vec![</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#d08770;">3</span><span>];
</span><span style="color:#b48ead;">let</span><span> zwei = liste.</span><span style="color:#96b5b4;">get_mut</span><span>(</span><span style="color:#d08770;">1</span><span>).</span><span style="color:#96b5b4;">unwrap</span><span>();
</span><span>*zwei = </span><span style="color:#d08770;">22</span><span>;
</span><span>liste = vec![</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">22</span><span>,</span><span style="color:#d08770;">3</span><span>];
</span></code></pre>
</li>
<li><code>.remove(index)</code> gibt auch das Element an der Stelle <code>index</code> zurueck und entfernt es gleichzeitig: <pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">let mut</span><span> liste = vec![</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#d08770;">3</span><span>];
</span><span style="color:#b48ead;">let</span><span> zwei = liste.</span><span style="color:#96b5b4;">remove</span><span>(</span><span style="color:#d08770;">1</span><span>);
</span><span>liste == vec![</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">3</span><span>];
</span></code></pre>
alle Elemente nach dem entfernten Element &quot;rutschen nach links nach&quot;</li>
<li><code>.push(element)</code> haengt ein neues Element ans Ende der Liste<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">let mut</span><span> liste = vec![</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#d08770;">3</span><span>];
</span><span>liste.</span><span style="color:#96b5b4;">push</span><span>(</span><span style="color:#d08770;">4</span><span>);
</span><span>liste == vec![</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#d08770;">3</span><span>,</span><span style="color:#d08770;">4</span><span>];
</span></code></pre>
</li>
</ul>
<h2 id="hinterteil-der-schlange-mit-listen">Hinterteil der Schlange mit Listen</h2>
<p>Da das ein etwas umfangreicherer Teil unseres Programms ist, stellen wir erstmal einen Plan auf. Die Grundidee, um die einzelnen Teile des Restes der Schlange zu simulieren ist folgende: </p>
<p>(Idee aus dem GTA heraus spontan entstanden. Danke Leute!)</p>
<ol>
<li>die Position des Kopfes wird fuer x Schritte zu gespeichert (in einer Liste)</li>
</ol>
<ul>
<li>dazu legen wir eine Liste fuer die Positionen an </li>
<li>wir fuegen jedes Frame die aktuelle Position des Kopfes hinten an die Liste an </li>
<li>wenn die Liste groesser als eine vorher festgelegte Laenge ist, loeschen wir den ersten Eintrag sodass alle anderen Eintraege nachrutschen (siehe Erklaerung von <code>.remove(index)</code>)</li>
</ul>
<ol start="2">
<li>die Position eines nicht-Kopf-Teils der Schlange wird auf eine der Positionen aus der Vergangenheit aus der Liste gesetzt</li>
</ol>
<ul>
<li>wir legen eine Anzahl an Teilen der Schlange fest </li>
<li>wir legen eine Schrittgroesse fest, die sagt wie weit wir in die Vergangenheit zurueckgehen und wie weit die Teile auseinanderliegen</li>
<li>fuer jedes Teil berechnen wir den zugehoerigen <code>index</code> um eine Position aus der Liste von 1. auszulesen</li>
<li>wir setzen die Position des Teils auf den Wert aus der Liste aus 1. an diesem Index</li>
</ul>
<p>Na dann: Jetzt wo der Plan feststeht kann es ja losgehen. Zunaechst definieren wir die Liste der vergangenen Positionen im <code>GameState</code>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">pub struct </span><span>GameState {
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>    </span><span style="color:#65737e;">// ... hier steht der Code von letztem Mal
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>
</span><span>    </span><span style="color:#bf616a;">past_positions</span><span>: Vec&lt;Vec2&gt;, </span><span style="color:#65737e;">// neu!
</span><span>}
</span><span>
</span><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">setup</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>    </span><span style="color:#65737e;">// ... hier steht der Code von letztem Mal
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>
</span><span>    c.state.past_positions = vec![]; </span><span style="color:#65737e;">// neu!
</span><span>}
</span><span>
</span><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">update</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> GameState { center, past_positions } = &amp;</span><span style="color:#b48ead;">mut</span><span> c.state;
</span><span>    </span><span style="color:#65737e;">//                      ^^^^^^^^^^^^^^ neu
</span><span>    
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>    </span><span style="color:#65737e;">// ... hier steht der Code von letztem Mal
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>}
</span></code></pre>
<p><em>schaut auf Zettel</em> </p>
<blockquote>
<p>dazu legen wir eine Liste fuer die Positionen an </p>
</blockquote>
<p>✅</p>
<p>Ok, naechster Schritt: jedes Frame fuegen wir die aktuelle Position in die Liste ein.</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">update</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> GameState { center, past_positions } = &amp;</span><span style="color:#b48ead;">mut</span><span> c.state;
</span><span>    
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>    </span><span style="color:#65737e;">// ... hier steht der Code von letztem Mal
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>
</span><span>    past_positions.</span><span style="color:#96b5b4;">push</span><span>(*center); </span><span style="color:#65737e;">// neu
</span><span>}
</span></code></pre>
<p>Ok, krass. Das ist ja voll easy, wenn man einen Plan hat. Check ✅</p>
<p>Zum Schluss wollen wir noch die Liste auf (erstmal) 100 Elemente beschraenken. Wenn wir das nicht tun, wird unsere Liste unendlich weit wachsen bis der komplette Speicher des Computers voll ist und das Programm oder der Rechner abstuerzt.</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">update</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> GameState { center, past_positions } = &amp;</span><span style="color:#b48ead;">mut</span><span> c.state;
</span><span>    
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>    </span><span style="color:#65737e;">// ... hier steht der Code von letztem Mal
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>
</span><span>    past_positions.</span><span style="color:#96b5b4;">push</span><span>(*center);
</span><span>
</span><span>    </span><span style="color:#b48ead;">if</span><span> past_positions.</span><span style="color:#96b5b4;">len</span><span>() &gt; </span><span style="color:#d08770;">100 </span><span>{ </span><span style="color:#65737e;">//
</span><span>        past_positions.</span><span style="color:#96b5b4;">remove</span><span>(</span><span style="color:#d08770;">0</span><span>);   </span><span style="color:#65737e;">// neu
</span><span>    }                               </span><span style="color:#65737e;">//
</span><span>}
</span></code></pre>
<p>Und damit haetten wir Teil 1 unseres Plans schon mal abgehakt ✅</p>
<p>Kommen wir nun zu Teil 2, der etwas trickier wird. Erstmal definieren wir uns ein paar Variablen, die folgende Dinge tun </p>
<blockquote>
<ul>
<li>wir legen eine Anzahl an Teilen der Schlange fest </li>
<li>wir legen eine Schrittgroesse fest, die sagt wie weit wir in die Vergangenheit zurueckgehen und wie weit die Teile auseinanderliegen</li>
</ul>
</blockquote>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">update</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> GameState { center, past_positions } = &amp;</span><span style="color:#b48ead;">mut</span><span> c.state;
</span><span>    
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>    </span><span style="color:#65737e;">// ... hier steht der Code von letztem Mal
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>
</span><span>    </span><span style="color:#b48ead;">let</span><span> num_parts = </span><span style="color:#d08770;">10</span><span>; </span><span style="color:#65737e;">// neu
</span><span>    </span><span style="color:#b48ead;">let</span><span> step_size = </span><span style="color:#d08770;">20</span><span>; </span><span style="color:#65737e;">// neu
</span><span>
</span><span>    past_positions.</span><span style="color:#96b5b4;">push</span><span>(*center);
</span><span>
</span><span>    </span><span style="color:#b48ead;">if</span><span> past_positions.</span><span style="color:#96b5b4;">len</span><span>() &gt; </span><span style="color:#d08770;">100 </span><span>{
</span><span>        past_positions.</span><span style="color:#96b5b4;">remove</span><span>(</span><span style="color:#d08770;">0</span><span>);
</span><span>    }                            
</span><span>}
</span></code></pre>
<p>Anhand dieser Variablen koennen wir nun auch nochmal die random gewaehlte <code>100</code> aus Teil 1 anpassen, da wir berechnen koennen wie viele Elemente wir maximal brauchen. Das ist ganz einfach beschraenkt durch <code>num_parts * step_size</code>.</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">update</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> GameState { center, past_positions } = &amp;</span><span style="color:#b48ead;">mut</span><span> c.state;
</span><span>    
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>    </span><span style="color:#65737e;">// ... hier steht der Code von letztem Mal
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>
</span><span>    </span><span style="color:#b48ead;">let</span><span> num_parts = </span><span style="color:#d08770;">10</span><span>;
</span><span>    </span><span style="color:#b48ead;">let</span><span> step_size = </span><span style="color:#d08770;">20</span><span>;
</span><span>
</span><span>    past_positions.</span><span style="color:#96b5b4;">push</span><span>(*center);
</span><span>
</span><span>    </span><span style="color:#65737e;">//                        vvvvvvvvvvvvvvvvvvvvvvv - angepasst
</span><span>    </span><span style="color:#b48ead;">if</span><span> past_positions.</span><span style="color:#96b5b4;">len</span><span>() &gt; (num_parts * step_size) {
</span><span>        past_positions.</span><span style="color:#96b5b4;">remove</span><span>(</span><span style="color:#d08770;">0</span><span>);
</span><span>    }                            
</span><span>}
</span></code></pre>
<p>Nun brauchen wir noch eine Liste um die Positionen des Rests der Schlange zu speichern. Dieser kann genauso zum Programm hinzugefuegt werden wie <code>past_positions</code> auch schon. Traust du dir schon zu das selbst zu probieren? Versuch es doch mal bevor du dir die Loesung anschaust!</p>
<details>
<summary> Loesung </summary>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">pub struct </span><span>GameState {
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>    </span><span style="color:#65737e;">// ... hier steht der Code von letztem Mal
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>
</span><span>    </span><span style="color:#bf616a;">past_positions</span><span>: Vec&lt;Vec2&gt;,
</span><span>    </span><span style="color:#bf616a;">tail_parts</span><span>: Vec&lt;Vec2&gt;, </span><span style="color:#65737e;">// neu!
</span><span>}
</span><span>
</span><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">setup</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>    </span><span style="color:#65737e;">// ... hier steht der Code von letztem Mal
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>
</span><span>    c.state.past_positions = vec![];
</span><span>    c.state.tail_parts = vec![]; </span><span style="color:#65737e;">// neu!
</span><span>}
</span><span>
</span><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">update</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> GameState { center, past_positions, tail_parts } = &amp;</span><span style="color:#b48ead;">mut</span><span> c.state;
</span><span>    </span><span style="color:#65737e;">//                                      ^^^^^^^^^^ neu
</span><span>    
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>    </span><span style="color:#65737e;">// ... hier steht der Code von letztem Mal
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>}
</span></code></pre>
</details>
<p>Der naechste Schritt ist mithilfe der <code>step_size</code> die richtigen Stellen in <code>past_positions</code> Liste zu berechnen, von denen wir die Daten bekommen wollen.</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">update</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> GameState { center, past_positions, tail_parts } = &amp;</span><span style="color:#b48ead;">mut</span><span> c.state;
</span><span>    
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>    </span><span style="color:#65737e;">// ... hier steht der Code von letztem Mal
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>
</span><span>    </span><span style="color:#b48ead;">let</span><span> num_parts = </span><span style="color:#d08770;">10</span><span>;
</span><span>    </span><span style="color:#b48ead;">let</span><span> step_size = </span><span style="color:#d08770;">20</span><span>;
</span><span>
</span><span>    past_positions.</span><span style="color:#96b5b4;">push</span><span>(*center);
</span><span>
</span><span>    </span><span style="color:#b48ead;">if</span><span> past_positions.</span><span style="color:#96b5b4;">len</span><span>() &gt; (num_parts * step_size) {
</span><span>        past_positions.</span><span style="color:#96b5b4;">remove</span><span>(</span><span style="color:#d08770;">0</span><span>);
</span><span>    }                            
</span><span>
</span><span>    </span><span style="color:#b48ead;">for</span><span> i in </span><span style="color:#d08770;">0</span><span>..num_parts {        </span><span style="color:#65737e;">//
</span><span>        </span><span style="color:#b48ead;">let</span><span> index = i * step_size; </span><span style="color:#65737e;">// neu!
</span><span>    }                              </span><span style="color:#65737e;">//
</span><span>}
</span></code></pre>
<p>und im Anschluss sollten wir diesen <code>index</code> auch nutzen, um den entsprechenden Eintrag in <code>tail_parts</code> zu updaten oder einzufuegen.</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">update</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> GameState { center, past_positions, tail_parts } = &amp;</span><span style="color:#b48ead;">mut</span><span> c.state;
</span><span>    
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>    </span><span style="color:#65737e;">// ... hier steht der Code von letztem Mal
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>
</span><span>    </span><span style="color:#b48ead;">let</span><span> num_parts = </span><span style="color:#d08770;">10</span><span>;
</span><span>    </span><span style="color:#b48ead;">let</span><span> step_size = </span><span style="color:#d08770;">20</span><span>;
</span><span>
</span><span>    past_positions.</span><span style="color:#96b5b4;">push</span><span>(*center);
</span><span>
</span><span>    </span><span style="color:#b48ead;">if</span><span> past_positions.</span><span style="color:#96b5b4;">len</span><span>() &gt; (num_parts * step_size) {
</span><span>        past_positions.</span><span style="color:#96b5b4;">remove</span><span>(</span><span style="color:#d08770;">0</span><span>);
</span><span>    }                            
</span><span>
</span><span>    </span><span style="color:#b48ead;">for</span><span> i in </span><span style="color:#d08770;">0</span><span>..num_parts {       
</span><span>        </span><span style="color:#b48ead;">let</span><span> index = i * step_size;
</span><span>        </span><span style="color:#b48ead;">let</span><span> new_tail_position = past_positions.</span><span style="color:#96b5b4;">get</span><span>(index).</span><span style="color:#96b5b4;">copied</span><span>().</span><span style="color:#96b5b4;">unwrap_or_default</span><span>();
</span><span>        </span><span style="color:#b48ead;">let</span><span> old_tail = tail_parts.</span><span style="color:#96b5b4;">get_mut</span><span>(index);
</span><span>
</span><span>        </span><span style="color:#b48ead;">if</span><span> old_tail.</span><span style="color:#96b5b4;">is_none</span><span>() {
</span><span>            tail_parts.</span><span style="color:#96b5b4;">push</span><span>(new_tail_position);
</span><span>        } </span><span style="color:#b48ead;">else </span><span>{
</span><span>            </span><span style="color:#b48ead;">let mut</span><span> old_tail_unwrapped = old_tail.</span><span style="color:#96b5b4;">unwrap</span><span>();
</span><span>            *old_tail_unwrapped = new_tail_position;
</span><span>        }
</span><span>    }                             
</span><span>}
</span></code></pre>
<p>Damit haben wir auch schon komplett Teil 2 abgehakt ✅ Als letzten Schritt muessen wir nun nur noch diese Daten verwenden, um wirklich den Rest der Schlange zu zeichnen.</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">update</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> GameState { center, past_positions, tail_parts } = &amp;</span><span style="color:#b48ead;">mut</span><span> c.state;
</span><span>    
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>    </span><span style="color:#65737e;">// ... hier steht der Code von letztem Mal
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>
</span><span>    </span><span style="color:#b48ead;">let</span><span> num_parts = </span><span style="color:#d08770;">10</span><span>;
</span><span>    </span><span style="color:#b48ead;">let</span><span> step_size = </span><span style="color:#d08770;">20</span><span>;
</span><span>
</span><span>    past_positions.</span><span style="color:#96b5b4;">push</span><span>(*center);
</span><span>
</span><span>    </span><span style="color:#b48ead;">if</span><span> past_positions.</span><span style="color:#96b5b4;">len</span><span>() &gt; (num_parts * step_size) {
</span><span>        past_positions.</span><span style="color:#96b5b4;">remove</span><span>(</span><span style="color:#d08770;">0</span><span>);
</span><span>    }                            
</span><span>
</span><span>    </span><span style="color:#b48ead;">for</span><span> i in </span><span style="color:#d08770;">0</span><span>..num_parts {       
</span><span>        </span><span style="color:#b48ead;">let</span><span> index = i * step_size;
</span><span>        </span><span style="color:#b48ead;">let</span><span> new_tail_position = past_positions.</span><span style="color:#96b5b4;">get</span><span>(index).</span><span style="color:#96b5b4;">copied</span><span>().</span><span style="color:#96b5b4;">unwrap_or_default</span><span>();
</span><span>        </span><span style="color:#b48ead;">let</span><span> old_tail = tail_parts.</span><span style="color:#96b5b4;">get_mut</span><span>(index);
</span><span>
</span><span>        </span><span style="color:#b48ead;">if</span><span> old_tail.</span><span style="color:#96b5b4;">is_none</span><span>() {
</span><span>            tail_parts.</span><span style="color:#96b5b4;">push</span><span>(new_tail_position);
</span><span>        } </span><span style="color:#b48ead;">else </span><span>{
</span><span>            </span><span style="color:#b48ead;">let mut</span><span> old_tail_unwrapped = old_tail.</span><span style="color:#96b5b4;">unwrap</span><span>();
</span><span>            *old_tail_unwrapped = new_tail_position;
</span><span>        }
</span><span>    }                             
</span><span>
</span><span>    </span><span style="color:#b48ead;">for</span><span> tail in tail_parts {
</span><span>        </span><span style="color:#96b5b4;">draw_rect</span><span>(*tail, Vec2::</span><span style="color:#d08770;">ONE</span><span>, Color::rgb(</span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">0.1</span><span>, </span><span style="color:#d08770;">0.2</span><span>), </span><span style="color:#d08770;">0</span><span>);
</span><span>    }
</span><span>}
</span></code></pre>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/011-snake.png" alt="Snake mit mehr als einem Teil" /></p>
<h1 id="6-kuchen-und-kollisionserkennung">6. Kuchen und Kollisionserkennung</h1>
<h2 id="zufaellige-kuchen">Zufaellige Kuchen</h2>
<p>Als naechstes brauchen wir etwas zu Essen fuer unsere Snake. Unser spontaner Einfall war es ihr einen Kuchen zu geben. Der Kuchen soll immer an einer zufaelligen Position erscheinen. Damit wir die Position wieder ueber mehrere frames speichern koennen, brauchen wir erstmal wieder ein neues Feld in unserem <code>GameState</code>. Ich denke, dass es inzwischen schon einfacher faellt das selbst zu machen. Deshalb lassen wir hier jetzt mal diesen Teil aus. Kleine Hinweise:</p>
<ul>
<li>wir fuegen folgendes im <code>GameState</code> hinzu : <code>cake_center: Vec2</code></li>
<li>wenn du nicht mehr weiter weisst, orientiere dich an einem der anderen Male von weiter oben</li>
</ul>
<p>Nun koennen wir diese Position nutzen, um einen Kreis zu zeichnen:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">update</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> GameState { center, past_positions, tail_parts, cake_center } = &amp;</span><span style="color:#b48ead;">mut</span><span> c.state;
</span><span>    
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>    </span><span style="color:#65737e;">// ... anderer Code
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>
</span><span>    </span><span style="color:#96b5b4;">draw_circle</span><span>(*cake_center, </span><span style="color:#d08770;">0.5</span><span>, Color::rgb(</span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>), </span><span style="color:#d08770;">1</span><span>);
</span><span>}
</span></code></pre>
<p>Damit der Kreis nun wirklich an einer zufaelligen Position auftaucht, muessen wir in <code>setup</code> auch wirklich die Variable auf eine zufaellige Position setzen. Dazu gibt es in <code>comfy</code> die <code>random_range</code> Funktion. Sie nimmt eine untere und eine obere Grenze und gibt einen zufaelligen Wert zwischen diesen beiden Werten zurueck. Sie wird zum Beispiel so hier verwendet:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">let</span><span> zahl = </span><span style="color:#96b5b4;">random_range</span><span>(</span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">10.0</span><span>);
</span></code></pre>
<p>Hierbei wird Zahl eine Kommazahl zwischen <code>0.0</code> und <code>10.0</code> sein. Nun nutzen wir das einfach, um die <code>x</code> und <code>y</code> Koordinaten von <code>cake_center</code> zu setzen:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">setup</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>    </span><span style="color:#65737e;">// ... anderer Code
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>
</span><span>    c.state.cake_center.x = </span><span style="color:#96b5b4;">random_range</span><span>(-</span><span style="color:#d08770;">5.0</span><span>, </span><span style="color:#d08770;">5.0</span><span>);
</span><span>    c.state.cake_center.y = </span><span style="color:#96b5b4;">random_range</span><span>(-</span><span style="color:#d08770;">5.0</span><span>, </span><span style="color:#d08770;">5.0</span><span>);
</span><span>}
</span></code></pre>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/012-randomcake.png" alt="Ein weisser Kreis mit zufaelliger Position ist neben der Snake zu sehen" /></p>
<h2 id="kollision-ein-kleiner-exkurs">Kollision - Ein kleiner Exkurs</h2>
<h3 id="das-problem">Das Problem</h3>
<p>Der Einfachheit halber haben wir den Kopf der Snake in einen Kreis geaendert. Das ist bereits auf dem letzten Bild zu sehen. Dies wird uns jetzt helfen die Kollision zwischen dem Kopf und dem Kuchen ordentlich zu entdecken. Die Kollision zwischen zwei Kreisen kann naemlich ziemlich einfach berechnet werden. Und <code>comfy</code> bietet uns wie immer auch noch Funktionalitaeten um das sogar noch mehr zu vereinfachen.</p>
<p>Zunaechst schauen wir uns erstmal die beiden moeglichen Faelle an:</p>
<ol>
<li>Die zwei Kreise (Kopf der Snake und Kuchen) kollidieren</li>
</ol>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/013-collidingcircles.png" alt="Zwei Kreise die ueberlappen" /></p>
<ol start="2">
<li>Die zwei Kreise kollidieren nicht</li>
</ol>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/014-noncollidingcircles.png" alt="Zwei Kreise die nicht ueberlappen" /></p>
<h3 id="die-loesung">Die Loesung</h3>
<p>Nun haben wir uns folgende Strategie fuer den Kollisions-Check im GTA erarbeitet: </p>
<ol>
<li>Ueber den Satz des Pythagoras kann man sich die Laenge der Strecke zwischen den zwei Kreismittelpunkten errechnen. Diese Laenge <code>L</code> ist die Distanz zwischen den zwei Kreisen. </li>
</ol>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/015-pythagoras.png" alt="Satz des Pythagoras fuer Kreisabstand" /></p>
<ol start="2">
<li>Nun sagen wir das <code>S</code> die Summe der Radien der beiden Kreise ist. <code>S = r1 + r2</code></li>
</ol>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/016-sumradius.png" alt="Summe der Radien" /></p>
<ol start="3">
<li>Nun machen wir eine Fallunterscheidung: </li>
</ol>
<ul>
<li>Ist die Distanz <code>L</code> groesser als die kombinierten Radien <code>S</code>, dann kollidieren die Kreise nicht</li>
</ul>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/017-nocollisionsolution.png" alt="Kreise kollidieren" /></p>
<ul>
<li>Ist die Distanz <code>L</code> kleiner als die kombinierten Radien <code>S</code>, dann kollidieren die Kreise</li>
</ul>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/018-collisionsolution.png" alt="Kreise kollidieren" /></p>
<ol start="4">
<li>Das war's auch schon!</li>
</ol>
<h2 id="kollision-im-code">Kollision im Code</h2>
<p>Wie gesagt hilft uns <code>comfy</code> etwas bei der Implementierung unserer Theorie von oben aus. Wir muessen nicht den Satz des Pythagoras in Code schreiben. Der <code>Vec2</code> Typ in <code>comfy</code> kommt mit einer praktischen Funktion names <code>distance</code>, die einen anderen Punkt annimmt und uns die Distanz zu diesem Punkt ausgibt. Sie wird wiefolgt genutzt:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">let</span><span> a = Vec2::new(</span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">0.0</span><span>);
</span><span style="color:#b48ead;">let</span><span> b = Vec2::new(</span><span style="color:#d08770;">3.0</span><span>, </span><span style="color:#d08770;">0.0</span><span>);
</span><span>
</span><span style="color:#b48ead;">let</span><span> dist = a.</span><span style="color:#96b5b4;">distance</span><span>(b);
</span><span>
</span><span style="color:#65737e;">// dist == 2.0
</span></code></pre>
<p>Damit koennen wir also schnell die Distanz zwischen Kopf der Snake und Kuchen berechnen:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#65737e;">// ...
</span><span>
</span><span style="color:#b48ead;">let</span><span> dist = head.</span><span style="color:#96b5b4;">distance</span><span>(cake_center);
</span><span>
</span><span style="color:#65737e;">// ...
</span></code></pre>
<p>Nun brauchen wir noch die Summe der Radien von Kopf- und Kuchenkreis. Da wir fuer beide fest den Radius <code>0.5</code> gewaehlt haben, ist die Summe einfach <code>1.0</code>.</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#65737e;">// ...
</span><span>
</span><span style="color:#b48ead;">let</span><span> sum_radii = </span><span style="color:#d08770;">0.5 </span><span>+ </span><span style="color:#d08770;">0.5</span><span>;
</span><span>
</span><span style="color:#65737e;">// ...
</span></code></pre>
<p>Als letztes koennen wir die Fallunterscheidung von oben mit einem einfachen Vergleichsoperator implementieren und bekommen daraus einen <code>bool</code> Wert zurueck. <code>bool</code> Werte koennen nur entweder <code>true</code> (wahr) oder <code>false</code> (falsch) sein. Das heisst im Code</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#65737e;">// ...
</span><span>
</span><span style="color:#b48ead;">let</span><span> is_colliding = dist &lt; sum_radii;
</span><span>
</span><span style="color:#65737e;">// ...
</span></code></pre>
<p>kann es sein, dass</p>
<ul>
<li><code>is_colliding</code> den Wert <code>true</code> annimmt, wenn die Distanz der Kreise kleiner der Summe der Radien ist</li>
<li><code>is_colliding</code> den Wert <code>false</code> annimmt, wenn die Distanz der Kreise groesser der Summe der Radien ist</li>
</ul>
<p>Basiered auf dem <code>is_colliding</code> Wert, koennen wir nun zum Beispiel einfach mal eine andere Farbe fuer den Kuchen waehlen:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#65737e;">// ...
</span><span>
</span><span style="color:#b48ead;">let</span><span> cake_color = </span><span style="color:#b48ead;">if</span><span> is_colliding { Color::rgb(</span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>) } </span><span style="color:#b48ead;">else </span><span>{ Color::rbg(</span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>) };
</span><span>
</span><span style="color:#96b5b4;">draw_circle</span><span>(*cake_center, </span><span style="color:#d08770;">0.5</span><span>, cake_color, </span><span style="color:#d08770;">1</span><span>);
</span><span>
</span><span style="color:#65737e;">// ...
</span></code></pre>
<p><img src="https://aviac.dev/voluntary/dks-2023-2024/./imgs/019-collisionblue.png" alt="Der Kuchen wird blau wenn die Snake mit ihm kollidiert" /></p>
<p>Der gesamte Code ist nun </p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">update</span><span>(</span><span style="color:#bf616a;">c</span><span>: &amp;</span><span style="color:#b48ead;">mut</span><span> GameContext) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> GameState { center, past_positions, tail_parts, cake_center } = &amp;</span><span style="color:#b48ead;">mut</span><span> c.state;
</span><span>    
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>    </span><span style="color:#65737e;">// ... anderer Code
</span><span>    </span><span style="color:#65737e;">// ...
</span><span>
</span><span>    </span><span style="color:#b48ead;">let</span><span> dist = head.</span><span style="color:#96b5b4;">distance</span><span>(cake_center);
</span><span>    </span><span style="color:#b48ead;">let</span><span> sum_radii = </span><span style="color:#d08770;">0.5 </span><span>+ </span><span style="color:#d08770;">0.5</span><span>;
</span><span>
</span><span>    </span><span style="color:#b48ead;">let</span><span> is_colliding = dist &lt; sum_radii;
</span><span>
</span><span>    </span><span style="color:#b48ead;">let</span><span> cake_color = </span><span style="color:#b48ead;">if</span><span> is_colliding {
</span><span>        Color::rgb(</span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>)
</span><span>    } </span><span style="color:#b48ead;">else </span><span>{
</span><span>        Color::rbg(</span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>)
</span><span>    };
</span><span>
</span><span>    </span><span style="color:#96b5b4;">draw_circle</span><span>(*cake_center, </span><span style="color:#d08770;">0.5</span><span>, cake_color, </span><span style="color:#d08770;">1</span><span>);
</span><span>}
</span></code></pre>
<h2 id="springende-kuchen">Springende Kuchen</h2>
<p>Damit der Kuchen an eine neue Position springt, wenn wir mit ihm kollidieren, braucht es nun nicht mehr viel Code. Wir muessen einfach nur die Position wie in <code>setup</code> auf eine zufaellige Position setzen, wenn <code>is_colliding</code> wahr ist.</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span>    </span><span style="color:#b48ead;">if</span><span> is_colliding {
</span><span>        *cake_center.x = </span><span style="color:#96b5b4;">random_range</span><span>(-</span><span style="color:#d08770;">5.0</span><span>, </span><span style="color:#d08770;">5.0</span><span>);
</span><span>        *cake_center.y = </span><span style="color:#96b5b4;">random_range</span><span>(-</span><span style="color:#d08770;">5.0</span><span>, </span><span style="color:#d08770;">5.0</span><span>);
</span><span>    }
</span></code></pre>
<h2 id="wachsende-schlangen">Wachsende Schlangen</h2>
<p>Um die Schlange nun wachsen zu lassen, muessen wir auch nicht mehr viel machen. Es reicht folgendes zu tun: </p>
<ul>
<li><code>num_parts</code> muss in den <code>GameState</code> ausgelagert werden (wir wollen es ja aendern)</li>
<li>wir setzen <code>num_parts</code> am Anfang auf <code>1</code></li>
<li>immer, wenn <code>is_colliding</code> wahr ist, dann fuegen wir ein part hinzu (also wir addieren <code>1</code> auf <code>num_parts</code>)</li>
</ul>
<p>Im Code oben ergaenzen wir</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span>    </span><span style="color:#b48ead;">if</span><span> is_colliding {
</span><span>        *cake_center.x = </span><span style="color:#96b5b4;">random_range</span><span>(-</span><span style="color:#d08770;">5.0</span><span>, </span><span style="color:#d08770;">5.0</span><span>);
</span><span>        *cake_center.y = </span><span style="color:#96b5b4;">random_range</span><span>(-</span><span style="color:#d08770;">5.0</span><span>, </span><span style="color:#d08770;">5.0</span><span>);
</span><span>        *num_parts += </span><span style="color:#d08770;">1</span><span>;
</span><span>    }
</span></code></pre>

	</div>
	<hr class="post-end">
	<footer class="post-info">
    
	  <p>
		<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>
		
		
		<span class="tag"><a href="https://aviac.dev/tags/voluntary/">voluntary</a></span>
		
		<span class="tag"><a href="https://aviac.dev/tags/school/">school</a></span>
		
		<span class="tag"><a href="https://aviac.dev/tags/teaching/">teaching</a></span>
		
		
    </p>
    
    <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>7167 Words</p>
    
    <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2023-10-23</p>
    
	</footer>
  </article>
    
    <aside id="toc">
        <div id="TableOfContents">
            <div class="toc-title">Table of content</div>
            <ul>
                
                <li>
                    <a href="https://aviac.dev/voluntary/dks-2023-2024/#1-basics">1. Basics</a>
                    
                    <ul>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#gta-programmieren">GTA Programmieren</a>
                        </li>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#das-framework-p5-js">Das Framework p5.js</a>
                        </li>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#was-ist-programmieren">Was ist Programmieren?</a>
                        </li>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#einfache-p5-js-befehle">Einfache p5.js Befehle</a>
                        </li>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#die-p5-js-reference">Die p5.js Reference</a>
                        </li>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#beispiel-programm-kapitel-1">Beispiel Programm Kapitel 1</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li>
                    <a href="https://aviac.dev/voluntary/dks-2023-2024/#2-loops-und-neue-befehle">2. Loops und neue Befehle</a>
                    
                    <ul>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#hilfreiche-werte-width-height">Hilfreiche Werte (width, height)</a>
                        </li>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#zufaellige-zahlenwerte-random">Zufaellige Zahlenwerte (random)</a>
                        </li>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#for-schleifen-for-loops">For-Schleifen (For Loops)</a>
                        </li>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#die-draw-funktion-framerate-und-framecount">Die draw Funktion, frameRate und frameCount</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li>
                    <a href="https://aviac.dev/voluntary/dks-2023-2024/#3-maus-variablen-und-listen">3. Maus, Variablen und Listen</a>
                    
                    <ul>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#maus-werte">Maus - Werte</a>
                        </li>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#listen-und-variablen">Listen und Variablen</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li>
                    <a href="https://aviac.dev/voluntary/dks-2023-2024/#4-zurueck-zum-anfang-mit-rust">4. Zurueck zum Anfang mit Rust</a>
                    
                    <ul>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#die-programmierumgebung">Die Programmierumgebung</a>
                        </li>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#selbst-das-programm-anpassen-variablen-anlegen-in-rust">Selbst das Programm anpassen - Variablen anlegen in Rust</a>
                        </li>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#nutzen-von-gamestate">Nutzen von GameState</a>
                        </li>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#keyboard-input">Keyboard input</a>
                        </li>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#uebungen">Uebungen</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li>
                    <a href="https://aviac.dev/voluntary/dks-2023-2024/#5-hinterteil-der-schlange">5. Hinterteil der Schlange</a>
                    
                    <ul>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#listen-vektoren">Listen (Vektoren)</a>
                        </li>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#hinterteil-der-schlange-mit-listen">Hinterteil der Schlange mit Listen</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li>
                    <a href="https://aviac.dev/voluntary/dks-2023-2024/#6-kuchen-und-kollisionserkennung">6. Kuchen und Kollisionserkennung</a>
                    
                    <ul>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#zufaellige-kuchen">Zufaellige Kuchen</a>
                        </li>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#kollision-ein-kleiner-exkurs">Kollision - Ein kleiner Exkurs</a>
                        </li>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#kollision-im-code">Kollision im Code</a>
                        </li>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#springende-kuchen">Springende Kuchen</a>
                        </li>
                        
                        <li>
                            <a href="https://aviac.dev/voluntary/dks-2023-2024/#wachsende-schlangen">Wachsende Schlangen</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
            </ul>
        </div>
    </aside>
    
  
  <div class="post-nav thin">
	
	
  </div>

  
</main>

	  </div>
	  
	  



<footer id="site-footer" class="section-inner thin animated fadeIn faster">
  <p>&copy; 2024 <a href="https:&#x2F;&#x2F;aviac.dev">aviac</a></p>
	
  </p>
</footer>




	</div>
	
	<script src="https://aviac.dev/js/main.js"></script>

	<!-- Math rendering -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
        onload="renderMathInElement(document.body, { delimiters: [ {left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}, {left: '\\[', right: '\\]', display: true}, {left: '\\(', right: '\\)', display: false}]});"></script>

    

	
	<script src="https://aviac.dev/js/copy.js"></script>
	
	<script src="https://aviac.dev/js/main.js"></script>

    
    

	
  </body>
</html>
